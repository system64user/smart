!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}System.register([],(function(){"use strict";return{execute:function(){var t,n,a,s,r,o;t=Drupal,o={variables:{navbarIsOpened:!1,loginPanelIsOpened:!1,searchBarIsOpened:!1,totalNotifs:0,loginTogglerButtonText:""},constants:{switchDesktopDisplay:1120,buttonTogglerTextClose:OVH.t("Close menu"),loginTogglerTextClose:OVH.t("Close login menu"),searchBarOpenClass:"ods-search-bar--open",customerAPIURL:drupalSettings.ovh.me_api_url,ticketsAPIURL:"".concat(drupalSettings.ovh.tickets_api_url,"?status=open"),pendingOrdersAPIURL:"".concat(drupalSettings.ovh.me_order_api_url,"/*/status?$aggreg=1&value:in=delivering,checking,documentsRequested"),getLastClickOnMenuStorage:sessionStorage.getItem("lastClickOnMenu"),headerUserNotifOrdersText:document.querySelector("[data-header-user-notif-orders]")?null===(n=document.querySelector("[data-header-user-notif-orders]"))||void 0===n?void 0:n.textContent:null,headerUserNotifTicketsText:document.querySelector("[data-header-user-notif-tickets]")?null===(a=document.querySelector("[data-header-user-notif-tickets]"))||void 0===a?void 0:a.textContent:null,headerTogglerButtonText:null===(s=document.querySelector("[data-header-button-text]"))||void 0===s?void 0:s.textContent},elements:{main:document.querySelector("[data-header]"),topHeaderContainer:document.querySelector("[data-top-menu-container]"),topHeaderList:document.querySelector("[data-top-menu-list]"),topHeaderSubcategoryLinks:document.querySelectorAll("[data-top-menu-link-has-subcat], [data-language-switcher-btn]"),headerTogglerButton:document.querySelector("[data-header-toggler-button]"),headerTogglerButtonTextTag:document.querySelector("[data-header-button-text]"),headerUserNicTag:document.querySelector("[data-header-user-nic]"),headerUserNotif:document.querySelector("[data-header-user-notif]"),headerUserNotifAmount:document.querySelector("[data-header-user-notif-amount]"),headerUserNotifList:document.querySelector("[data-header-user-notif-list]"),headerUserNotifOrders:document.querySelector("[data-header-user-notif-orders]"),headerUserNotifTickets:document.querySelector("[data-header-user-notif-tickets]"),loginTogglerButton:document.querySelector("[data-login-toggler-button]"),loginMenuWrapper:document.querySelector("[data-login-menu-wrapper]"),searchBarTogglerButton:document.querySelector("[ods-search-bar-toggle]"),searchBarCloseButton:document.querySelector("[data-search-bar-close]"),navbar:document.querySelector("[data-navbar]"),overlay:document.querySelector("[data-header-overlay]"),searchOverlay:document.querySelector("[data-header-search-overlay]"),overlays:document.querySelectorAll("[data-header-overlay], [data-header-search-overlay]"),navbarItemsLvl1:document.querySelectorAll("[data-navbar-item-n1]"),navbarSubcategoryLinks:document.querySelectorAll("[data-link-has-subcat]"),headerBackLinks:document.querySelectorAll("[data-back-link]"),headerLinks:document.querySelector("[data-navbar]")&&(null===(r=document.querySelector("[data-navbar]"))||void 0===r?void 0:r.querySelectorAll(".ods-navbar-link"))||[],topHeaderLocalAnchors:[],headerSearchBar:null,loginTogglerButtonTextTag:document.querySelector("[data-login-button-text]")},methods:{initialize:function(){o.elements.navbar&&(o.elements.topHeaderLocalAnchors=o.elements.navbar.querySelectorAll('a[href^="#"]')),o.elements.loginTogglerButton&&(o.variables.loginTogglerButtonText=o.elements.loginTogglerButtonTextTag.textContent),o.elements.headerSearchBar=o.elements.main.querySelector("[ods-search-bar]"),o.events.clickTogglerButton(),o.events.clickOverlay(),o.events.focusSubcategoryLink(),o.elements.navbar&&(o.events.windowSizeListener(),o.events.clickLocalAnchor(),o.events.clickBackLink(),o.events.clickLink(),o.events.focusSubcategoryLinkLvl2(),o.events.clickSubcategoryLink()),o.elements.searchBarTogglerButton&&(o.events.clickSearchBarToggler(),o.events.closeSearchButton()),o.elements.loginTogglerButton&&o.events.clickLoginButton(),o.elements.navbarSubcategoryLinks.length&&o.events.focusNavbarMenu(),window.innerWidth<o.constants.switchDesktopDisplay&&o.elements.topHeaderList&&o.elements.navbar&&(o.elements.navbar.appendChild(o.elements.topHeaderList),o.elements.topHeaderList.classList.remove("d-none")),o.elements.navbar&&o.methods.highlightCurrentPageOnMenu()},navbarDisplay:function(){var t,n;o.variables.navbarIsOpened?(window.innerWidth<o.constants.switchDesktopDisplay&&(null===(t=document.querySelector("body"))||void 0===t||t.classList.add("no-scroll")),o.elements.navbar.classList.add("active"),o.elements.overlay.classList.remove("inactive"),o.elements.headerTogglerButton.classList.add("active"),o.elements.headerTogglerButtonTextTag.textContent=o.constants.buttonTogglerTextClose):(null===(n=document.querySelector("body"))||void 0===n||n.classList.remove("no-scroll"),o.elements.navbar.classList.remove("active"),o.elements.overlay.classList.add("inactive"),o.elements.headerTogglerButton.classList.remove("active"),o.elements.headerTogglerButtonTextTag.textContent=o.constants.headerTogglerButtonText||null,e(o.elements.navbarSubcategoryLinks).forEach((function(e){e.nextElementSibling&&e.nextElementSibling.classList.remove("active")})))},loginPanelDisplay:function(){o.variables.loginPanelIsOpened?(o.elements.loginMenuWrapper.classList.add("active"),o.elements.overlay.classList.remove("inactive"),o.elements.loginTogglerButtonTextTag.textContent=o.constants.loginTogglerTextClose):(o.elements.loginMenuWrapper.classList.remove("active"),o.elements.overlay.classList.add("inactive"),o.elements.loginTogglerButtonTextTag.textContent=o.variables.loginTogglerButtonText)},searchBarDisplay:function(){var e,t,n,a;o.variables.searchBarIsOpened?(window.innerWidth<o.constants.switchDesktopDisplay&&(o.elements.searchBarTogglerButton.classList.add("d-none"),o.elements.searchBarTogglerButton.classList.remove("d-flex")),o.elements.searchOverlay.classList.remove("inactive"),null===(e=o.elements.headerSearchBar)||void 0===e||e.classList.add(o.constants.searchBarOpenClass),null===(t=o.elements.headerSearchBar)||void 0===t||null===(n=t.querySelector("input"))||void 0===n||n.focus()):(window.innerWidth<o.constants.switchDesktopDisplay&&(o.elements.searchBarTogglerButton.classList.add("d-flex"),o.elements.searchBarTogglerButton.classList.remove("d-none")),o.elements.searchOverlay.classList.add("inactive"),null===(a=o.elements.headerSearchBar)||void 0===a||a.classList.remove(o.constants.searchBarOpenClass))},menuSubcategoryDisplay:function(t){if(window.innerWidth<o.constants.switchDesktopDisplay){var n;null===(n=t.nextElementSibling)||void 0===n||n.classList.add("active"),o.elements.navbar.classList.add("no-scroll");var a=t.closest("[data-menu-scroll-lock]");a&&(a.scroll({top:0,behavior:"smooth"}),a.classList.add("no-scroll"))}else{var s,r;if(t.classList.contains("ods-navbar-link--n1")&&null!==(s=t.nextElementSibling)&&void 0!==s&&s.querySelector("[data-menu-sublist]")){var i=t.nextElementSibling.querySelectorAll("[data-link-has-subcat]"),l=t.nextElementSibling.querySelectorAll("[data-menu-sublist]");e(i).forEach((function(e){e.classList.remove("active")})),e(l).forEach((function(e){e.classList.remove("active")})),i[0].classList.add("active"),l[0].classList.add("active"),t.nextElementSibling.style.minHeight="".concat(l[0].offsetHeight,"px")}if(null!==(r=t.nextElementSibling)&&void 0!==r&&r.classList.contains("ods-navbar__list--n3")){var c,d,u=null===(c=t.closest("[data-menu-sublist]"))||void 0===c?void 0:c.querySelectorAll("[data-link-has-subcat]"),m=null===(d=t.closest("[data-menu-sublist]"))||void 0===d?void 0:d.querySelectorAll(".ods-navbar__list--n3");u&&u.length&&e(u).forEach((function(e){e.classList.remove("active")})),m&&m.length&&e(m).forEach((function(e){e.classList.remove("active")})),t.classList.add("active"),t.nextElementSibling.classList.add("active");var h=t.closest(".ods-navbar__list--n2");h&&(h.style.minHeight="".concat(t.nextElementSibling.offsetHeight,"px"),t.nextElementSibling.style.minHeight="".concat(h.offsetHeight,"px"))}}},showOverlayDesktop:function(){window.innerWidth>=o.constants.switchDesktopDisplay&&o.elements.overlay.classList.remove("inactive")},hideOverlayDesktop:function(){window.innerWidth>=o.constants.switchDesktopDisplay&&o.elements.overlay.classList.add("inactive")},getLoggedInUser:function(){return new Promise((function(e,t){fetch(o.constants.customerAPIURL).then((function(t){return e(t.json())})).catch((function(e){return t(e)}))}))},getPendingOrders:function(){var e=new Headers;e.append("X-Ovh-ApiVersion","beta");var t={method:"GET",headers:e};return new Promise((function(e,n){fetch(o.constants.pendingOrdersAPIURL,t).then((function(t){return e(t.json())})).catch((function(e){return n(e)}))}))},getPendingTickets:function(){return new Promise((function(e,t){fetch(o.constants.ticketsAPIURL).then((function(t){return e(t.json())})).catch((function(e){return t(e)}))}))},setSessionStorageLoggedInUser:function(e,t,n){var a="1";if(sessionStorage.getItem("user")!==e&&(sessionStorage.setItem("lastCheck","0"),sessionStorage.setItem("pendingOrders",""),sessionStorage.setItem("pendingTickets","")),sessionStorage.setItem("user",e),sessionStorage.setItem("user_code",t),sessionStorage.setItem("legalform",n),null!==sessionStorage.getItem("legalform"))switch(sessionStorage.getItem("legalform")){case"individual":a="1";break;case"association":a="2";break;case"corporation":a="3";break;case"other":a="4"}"undefined"!=typeof tc_vars&&(tc_vars.user_code=t,tc_vars.user_code.length&&(tag.identifiedVisitor.unset(),tag.identifiedVisitor.set({id:tc_vars.user_code,category:a})))},displayUserNic:function(e){o.elements.headerUserNicTag.textContent="(".concat(e,")"),o.elements.headerUserNicTag.classList.remove("d-none")},displayNotifications:function(e,t){switch(t){case"orders":parseInt(e,10)>0?(o.elements.headerUserNotifOrders.textContent=OVH.formatPlural(parseInt(e,10),"1 pending order","@count pending orders"),o.variables.totalNotifs+=parseInt(e,10)):o.elements.headerUserNotifOrders.textContent=o.constants.headerUserNotifOrdersText||null;break;case"tickets":parseInt(e,10)>0?(o.elements.headerUserNotifTickets.textContent=OVH.formatPlural(parseInt(e,10),"1 pending ticket","@count pending tickets"),o.variables.totalNotifs+=parseInt(e,10)):o.elements.headerUserNotifTickets.textContent=o.constants.headerUserNotifTicketsText||null}o.variables.totalNotifs>0&&(o.elements.headerUserNotifAmount.classList.remove("d-none"),o.elements.headerUserNotifAmount.classList.add("d-flex"),o.elements.headerUserNotifAmount.textContent=o.variables.totalNotifs.toString())},displayUserInfo:function(){return o.methods.getLoggedInUser().then((function(e){var t=e.nichandle,n=e.customerCode,a=e.legalForm;o.methods.setSessionStorageLoggedInUser(t,n,a),t&&"undefined"!==t&&o.methods.displayUserNic(t)})).then((function(){o.elements.headerUserNicTag&&(o.elements.headerUserNotif.classList.remove("d-none"),o.elements.headerUserNotif.classList.add("d-lg-flex"),o.methods.getPendingOrders().then((function(e){sessionStorage.setItem("pendingOrders",e.length),e.length&&o.methods.displayNotifications(e.length,"orders")})),o.methods.getPendingTickets().then((function(e){sessionStorage.setItem("pendingTickets",e.length),e.length&&o.methods.displayNotifications(e.length,"tickets")})))}))},getItemToHighlight:function(e){var t;return e.closest("[data-navbar-item-n1]")?null===(t=e.closest("[data-navbar-item-n1]"))||void 0===t?void 0:t.querySelector(".ods-navbar-link--n1"):null},getCurrentUrl:function(){var e=new URL(window.location.href);return e.origin+e.pathname},getLink:function(){return o.constants.getLastClickOnMenuStorage?o.elements.navbar.querySelector('[data-navi-id="'.concat(o.constants.getLastClickOnMenuStorage,'"]')):o.elements.navbar.querySelector('[href="'.concat(o.methods.getCurrentUrl(),'"]'))},highlightCurrentPageOnMenu:function(){var e=o.methods.getLink();sessionStorage.removeItem("lastClickOnMenu");var t=e?o.methods.getItemToHighlight(e):null;t&&t.classList.add("ods-navbar-link--active")}},events:{clickTogglerButton:function(){o.elements.headerTogglerButton.addEventListener("click",(function(){o.elements.loginTogglerButton&&(o.variables.loginPanelIsOpened=!1,o.methods.loginPanelDisplay()),o.elements.headerSearchBar&&(o.variables.searchBarIsOpened=!1,o.methods.searchBarDisplay()),o.variables.navbarIsOpened=!o.variables.navbarIsOpened,o.methods.navbarDisplay()}))},closeSearchButton:function(){o.elements.searchBarCloseButton.addEventListener("click",(function(){var e=document.querySelector(".ais-SearchBox-input");e&&e.value.length?e.value="":(o.variables.searchBarIsOpened=!1,o.methods.searchBarDisplay())}))},clickLoginButton:function(){o.elements.loginTogglerButton.addEventListener("click",(function(){o.variables.navbarIsOpened=!1,o.methods.navbarDisplay(),o.elements.headerSearchBar&&(o.variables.searchBarIsOpened=!1,o.methods.searchBarDisplay()),o.variables.loginPanelIsOpened=!o.variables.loginPanelIsOpened,o.methods.loginPanelDisplay()}))},clickSearchBarToggler:function(){o.elements.searchBarTogglerButton.addEventListener("click",(function(){o.variables.searchBarIsOpened=!0,o.methods.searchBarDisplay(),o.variables.navbarIsOpened=!1,o.methods.navbarDisplay(),o.elements.loginTogglerButton&&(o.variables.loginPanelIsOpened=!1,o.methods.loginPanelDisplay())}))},clickOverlay:function(){e(o.elements.overlays).forEach((function(e){e.addEventListener("click",(function(){e.classList.add("inactive"),o.variables.navbarIsOpened=!1,o.methods.navbarDisplay(),o.elements.loginTogglerButton&&(o.variables.loginPanelIsOpened=!1,o.methods.loginPanelDisplay()),o.elements.searchBarTogglerButton&&(o.variables.searchBarIsOpened=!1,o.methods.searchBarDisplay())}))}))},clickSubcategoryLink:function(){[].concat(e(o.elements.navbarSubcategoryLinks),e(o.elements.topHeaderSubcategoryLinks)).forEach((function(e){e.addEventListener("click",(function(t){o.methods.menuSubcategoryDisplay(e),window.innerWidth<o.constants.switchDesktopDisplay&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}))}))},focusSubcategoryLink:function(){[].concat(e(o.elements.topHeaderSubcategoryLinks),e(o.elements.navbarSubcategoryLinks)).forEach((function(e){var t,n;null===(t=e.closest("li"))||void 0===t||t.addEventListener("focusin",(function(){window.innerWidth>=o.constants.switchDesktopDisplay&&e.setAttribute("aria-expanded","true")})),null===(n=e.closest("li"))||void 0===n||n.addEventListener("focusout",(function(){window.innerWidth>=o.constants.switchDesktopDisplay&&e.setAttribute("aria-expanded","false")}))}))},focusNavbarMenu:function(){e(o.elements.navbarItemsLvl1).forEach((function(e){e.addEventListener("mouseenter",o.methods.showOverlayDesktop),e.addEventListener("focusin",o.methods.showOverlayDesktop),e.addEventListener("mouseleave",o.methods.hideOverlayDesktop),e.addEventListener("focusout",o.methods.hideOverlayDesktop)})),o.elements.headerSearchBar&&o.elements.headerSearchBar.addEventListener("focusout",(function(e){var t,n,a=document.querySelector(".ods-search-bar__form__input");null===(t=e.target)||void 0===t||!t.classList.contains("ods-search-bar__form__reset")||null!=a&&a.value||(o.elements.searchOverlay.classList.add("inactive"),null===(n=o.elements.headerSearchBar)||void 0===n||n.classList.remove(o.constants.searchBarOpenClass))}))},focusSubcategoryLinkLvl2:function(){e(o.elements.navbarSubcategoryLinks).forEach((function(e){e.addEventListener("mouseenter",(function(){window.innerWidth>=o.constants.switchDesktopDisplay&&o.methods.menuSubcategoryDisplay(e)})),e.addEventListener("focusin",(function(){window.innerWidth>=o.constants.switchDesktopDisplay&&o.methods.menuSubcategoryDisplay(e)}))}))},clickBackLink:function(){e(o.elements.headerBackLinks).forEach((function(e){e.addEventListener("click",(function(){if(window.innerWidth<o.constants.switchDesktopDisplay){var t,n;null===(t=e.closest("[data-menu-scroll-lock]"))||void 0===t||t.classList.remove("no-scroll");var a,s=e.parentNode;s&&s.closest("[data-menu-sublist]")?null===(a=s.closest("[data-menu-sublist]"))||void 0===a||a.classList.remove("active"):s.hasAttribute("data-language-switcher-content")&&s.classList.remove("active"),e.closest("[data-menu-sublist]")&&null!==(n=e.closest("[data-menu-sublist]"))&&void 0!==n&&n.classList.contains("ods-navbar__list--n2")&&o.elements.navbar.classList.remove("no-scroll")}}))}))},clickLink:function(){e(o.elements.headerLinks).forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-navi-id");sessionStorage.setItem("lastClickOnMenu",t)}))}))},clickLocalAnchor:function(){e(o.elements.topHeaderLocalAnchors).forEach((function(e){e.addEventListener("click",(function(t){var n,a,s=e.getAttribute("href");document.querySelector(s)&&(null===(n=document.querySelector(s))||void 0===n||n.scrollIntoView({behavior:"smooth"})),"#callback"===s&&(null===(a=document.querySelector('[data-expand-section="true"]').querySelector(".oui-cta"))||void 0===a||a.click()),t.preventDefault()}))}))},windowSizeListener:function(){window.addEventListener("resize",(function(){window.innerWidth<o.constants.switchDesktopDisplay?o.elements.topHeaderList&&(o.elements.navbar.appendChild(o.elements.topHeaderList),o.elements.topHeaderList.classList.remove("d-none")):(o.variables.navbarIsOpened=!1,o.methods.navbarDisplay(),o.elements.topHeaderList&&o.elements.topHeaderList.parentNode!==o.elements.topHeaderContainer&&o.elements.topHeaderContainer.appendChild(o.elements.topHeaderList))}))}},attach:function(){o.methods.initialize()}},t.behaviors.header=o}}}))}();
