function p(){import("data:text/javascript,")}(v=>{var u,h,m,g;const e={variables:{navbarIsOpened:!1,loginPanelIsOpened:!1,searchBarIsOpened:!1,totalNotifs:0,loginTogglerButtonText:""},constants:{switchDesktopDisplay:1120,buttonTogglerTextClose:OVH.t("Close menu"),loginTogglerTextClose:OVH.t("Close login menu"),searchBarOpenClass:"ods-search-bar--open",customerAPIURL:drupalSettings.ovh.me_api_url,ticketsAPIURL:`${drupalSettings.ovh.tickets_api_url}?status=open`,pendingOrdersAPIURL:`${drupalSettings.ovh.me_order_api_url}/*/status?$aggreg=1&value:in=delivering,checking,documentsRequested`,getLastClickOnMenuStorage:sessionStorage.getItem("lastClickOnMenu"),headerUserNotifOrdersText:document.querySelector("[data-header-user-notif-orders]")?(u=document.querySelector("[data-header-user-notif-orders]"))==null?void 0:u.textContent:null,headerUserNotifTicketsText:document.querySelector("[data-header-user-notif-tickets]")?(h=document.querySelector("[data-header-user-notif-tickets]"))==null?void 0:h.textContent:null,headerTogglerButtonText:(m=document.querySelector("[data-header-button-text]"))==null?void 0:m.textContent},elements:{main:document.querySelector("[data-header]"),topHeaderContainer:document.querySelector("[data-top-menu-container]"),topHeaderList:document.querySelector("[data-top-menu-list]"),topHeaderSubcategoryLinks:document.querySelectorAll("[data-top-menu-link-has-subcat], [data-language-switcher-btn]"),headerTogglerButton:document.querySelector("[data-header-toggler-button]"),headerTogglerButtonTextTag:document.querySelector("[data-header-button-text]"),headerUserNicTag:document.querySelector("[data-header-user-nic]"),headerUserNotif:document.querySelector("[data-header-user-notif]"),headerUserNotifAmount:document.querySelector("[data-header-user-notif-amount]"),headerUserNotifList:document.querySelector("[data-header-user-notif-list]"),headerUserNotifOrders:document.querySelector("[data-header-user-notif-orders]"),headerUserNotifTickets:document.querySelector("[data-header-user-notif-tickets]"),loginTogglerButton:document.querySelector("[data-login-toggler-button]"),loginMenuWrapper:document.querySelector("[data-login-menu-wrapper]"),searchBarTogglerButton:document.querySelector("[ods-search-bar-toggle]"),searchBarCloseButton:document.querySelector("[data-search-bar-close]"),navbar:document.querySelector("[data-navbar]"),overlay:document.querySelector("[data-header-overlay]"),searchOverlay:document.querySelector("[data-header-search-overlay]"),overlays:document.querySelectorAll("[data-header-overlay], [data-header-search-overlay]"),navbarItemsLvl1:document.querySelectorAll("[data-navbar-item-n1]"),navbarSubcategoryLinks:document.querySelectorAll("[data-link-has-subcat]"),headerBackLinks:document.querySelectorAll("[data-back-link]"),headerLinks:document.querySelector("[data-navbar]")?((g=document.querySelector("[data-navbar]"))==null?void 0:g.querySelectorAll(".ods-navbar-link"))||[]:[],topHeaderLocalAnchors:[],headerSearchBar:null,loginTogglerButtonTextTag:document.querySelector("[data-login-button-text]")},methods:{initialize:()=>{e.elements.navbar&&(e.elements.topHeaderLocalAnchors=e.elements.navbar.querySelectorAll('a[href^="#"]')),e.elements.loginTogglerButton&&(e.variables.loginTogglerButtonText=e.elements.loginTogglerButtonTextTag.textContent),e.elements.headerSearchBar=e.elements.main.querySelector("[ods-search-bar]"),e.events.clickTogglerButton(),e.events.clickOverlay(),e.events.focusSubcategoryLink(),e.elements.navbar&&(e.events.windowSizeListener(),e.events.clickLocalAnchor(),e.events.clickBackLink(),e.events.clickLink(),e.events.focusSubcategoryLinkLvl2(),e.events.clickSubcategoryLink()),e.elements.searchBarTogglerButton&&(e.events.clickSearchBarToggler(),e.events.closeSearchButton()),e.elements.loginTogglerButton&&e.events.clickLoginButton(),e.elements.navbarSubcategoryLinks.length&&e.events.focusNavbarMenu(),window.innerWidth<e.constants.switchDesktopDisplay&&e.elements.topHeaderList&&e.elements.navbar&&(e.elements.navbar.appendChild(e.elements.topHeaderList),e.elements.topHeaderList.classList.remove("d-none")),e.elements.navbar&&e.methods.highlightCurrentPageOnMenu()},navbarDisplay:()=>{var t,s;e.variables.navbarIsOpened?(window.innerWidth<e.constants.switchDesktopDisplay&&((t=document.querySelector("body"))==null||t.classList.add("no-scroll")),e.elements.navbar.classList.add("active"),e.elements.overlay.classList.remove("inactive"),e.elements.headerTogglerButton.classList.add("active"),e.elements.headerTogglerButtonTextTag.textContent=e.constants.buttonTogglerTextClose):((s=document.querySelector("body"))==null||s.classList.remove("no-scroll"),e.elements.navbar.classList.remove("active"),e.elements.overlay.classList.add("inactive"),e.elements.headerTogglerButton.classList.remove("active"),e.elements.headerTogglerButtonTextTag.textContent=e.constants.headerTogglerButtonText||null,[...e.elements.navbarSubcategoryLinks].forEach(a=>{a.nextElementSibling&&a.nextElementSibling.classList.remove("active")}))},loginPanelDisplay:()=>{e.variables.loginPanelIsOpened?(e.elements.loginMenuWrapper.classList.add("active"),e.elements.overlay.classList.remove("inactive"),e.elements.loginTogglerButtonTextTag.textContent=e.constants.loginTogglerTextClose):(e.elements.loginMenuWrapper.classList.remove("active"),e.elements.overlay.classList.add("inactive"),e.elements.loginTogglerButtonTextTag.textContent=e.variables.loginTogglerButtonText)},searchBarDisplay:()=>{var t,s,a,n;e.variables.searchBarIsOpened?(window.innerWidth<e.constants.switchDesktopDisplay&&(e.elements.searchBarTogglerButton.classList.add("d-none"),e.elements.searchBarTogglerButton.classList.remove("d-flex")),e.elements.searchOverlay.classList.remove("inactive"),(t=e.elements.headerSearchBar)==null||t.classList.add(e.constants.searchBarOpenClass),(a=(s=e.elements.headerSearchBar)==null?void 0:s.querySelector("input"))==null||a.focus()):(window.innerWidth<e.constants.switchDesktopDisplay&&(e.elements.searchBarTogglerButton.classList.add("d-flex"),e.elements.searchBarTogglerButton.classList.remove("d-none")),e.elements.searchOverlay.classList.add("inactive"),(n=e.elements.headerSearchBar)==null||n.classList.remove(e.constants.searchBarOpenClass))},menuSubcategoryDisplay:t=>{var s,a,n,r,c;if(window.innerWidth<e.constants.switchDesktopDisplay){(s=t.nextElementSibling)==null||s.classList.add("active"),e.elements.navbar.classList.add("no-scroll");const o=t.closest("[data-menu-scroll-lock]");o&&(o.scroll({top:0,behavior:"smooth"}),o.classList.add("no-scroll"))}else{if(t.classList.contains("ods-navbar-link--n1")&&((a=t.nextElementSibling)==null?void 0:a.querySelector("[data-menu-sublist]"))){const o=t.nextElementSibling.querySelectorAll("[data-link-has-subcat]"),i=t.nextElementSibling.querySelectorAll("[data-menu-sublist]");[...o].forEach(l=>{l.classList.remove("active")}),[...i].forEach(l=>{l.classList.remove("active")}),o[0].classList.add("active"),i[0].classList.add("active"),t.nextElementSibling.style.minHeight=`${i[0].offsetHeight}px`}if((n=t.nextElementSibling)!=null&&n.classList.contains("ods-navbar__list--n3")){const o=(r=t.closest("[data-menu-sublist]"))==null?void 0:r.querySelectorAll("[data-link-has-subcat]"),i=(c=t.closest("[data-menu-sublist]"))==null?void 0:c.querySelectorAll(".ods-navbar__list--n3");o&&o.length&&[...o].forEach(d=>{d.classList.remove("active")}),i&&i.length&&[...i].forEach(d=>{d.classList.remove("active")}),t.classList.add("active"),t.nextElementSibling.classList.add("active");const l=t.closest(".ods-navbar__list--n2");l&&(l.style.minHeight=`${t.nextElementSibling.offsetHeight}px`,t.nextElementSibling.style.minHeight=`${l.offsetHeight}px`)}}},showOverlayDesktop:()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.elements.overlay.classList.remove("inactive")},hideOverlayDesktop:()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.elements.overlay.classList.add("inactive")},getLoggedInUser:()=>new Promise((t,s)=>{fetch(e.constants.customerAPIURL).then(a=>t(a.json())).catch(a=>s(a))}),getPendingOrders:()=>{const t=new Headers;t.append("X-Ovh-ApiVersion","beta");const s={method:"GET",headers:t};return new Promise((a,n)=>{fetch(e.constants.pendingOrdersAPIURL,s).then(r=>a(r.json())).catch(r=>n(r))})},getPendingTickets:()=>new Promise((t,s)=>{fetch(e.constants.ticketsAPIURL).then(a=>t(a.json())).catch(a=>s(a))}),setSessionStorageLoggedInUser:(t,s,a)=>{let n="1";if(sessionStorage.getItem("user")!==t&&(sessionStorage.setItem("lastCheck","0"),sessionStorage.setItem("pendingOrders",""),sessionStorage.setItem("pendingTickets","")),sessionStorage.setItem("user",t),sessionStorage.setItem("user_code",s),sessionStorage.setItem("legalform",a),sessionStorage.getItem("legalform")!==null)switch(sessionStorage.getItem("legalform")){case"individual":n="1";break;case"association":n="2";break;case"corporation":n="3";break;case"other":n="4";break}typeof tc_vars!="undefined"&&(tc_vars.user_code=s,tc_vars.user_code.length&&(tag.identifiedVisitor.unset(),tag.identifiedVisitor.set({id:tc_vars.user_code,category:n})))},displayUserNic:t=>{e.elements.headerUserNicTag.textContent=`(${t})`,e.elements.headerUserNicTag.classList.remove("d-none")},displayNotifications:(t,s)=>{switch(s){case"orders":parseInt(t,10)>0?(e.elements.headerUserNotifOrders.textContent=OVH.formatPlural(parseInt(t,10),"1 pending order","@count pending orders"),e.variables.totalNotifs+=parseInt(t,10)):e.elements.headerUserNotifOrders.textContent=e.constants.headerUserNotifOrdersText||null;break;case"tickets":parseInt(t,10)>0?(e.elements.headerUserNotifTickets.textContent=OVH.formatPlural(parseInt(t,10),"1 pending ticket","@count pending tickets"),e.variables.totalNotifs+=parseInt(t,10)):e.elements.headerUserNotifTickets.textContent=e.constants.headerUserNotifTicketsText||null;break}e.variables.totalNotifs>0&&(e.elements.headerUserNotifAmount.classList.remove("d-none"),e.elements.headerUserNotifAmount.classList.add("d-flex"),e.elements.headerUserNotifAmount.textContent=e.variables.totalNotifs.toString())},displayUserInfo:()=>e.methods.getLoggedInUser().then(t=>{const{nichandle:s,customerCode:a,legalForm:n}=t;e.methods.setSessionStorageLoggedInUser(s,a,n),s&&s!=="undefined"&&e.methods.displayUserNic(s)}).then(()=>{e.elements.headerUserNicTag&&(e.elements.headerUserNotif.classList.remove("d-none"),e.elements.headerUserNotif.classList.add("d-lg-flex"),e.methods.getPendingOrders().then(t=>{sessionStorage.setItem("pendingOrders",t.length),t.length&&e.methods.displayNotifications(t.length,"orders")}),e.methods.getPendingTickets().then(t=>{sessionStorage.setItem("pendingTickets",t.length),t.length&&e.methods.displayNotifications(t.length,"tickets")}))}),getItemToHighlight:t=>{var s;return t.closest("[data-navbar-item-n1]")?(s=t.closest("[data-navbar-item-n1]"))==null?void 0:s.querySelector(".ods-navbar-link--n1"):null},getCurrentUrl:()=>{const t=new URL(window.location.href);return t.origin+t.pathname},getLink:()=>e.constants.getLastClickOnMenuStorage?e.elements.navbar.querySelector(`[data-navi-id="${e.constants.getLastClickOnMenuStorage}"]`):e.elements.navbar.querySelector(`[href="${e.methods.getCurrentUrl()}"]`),highlightCurrentPageOnMenu:()=>{const t=e.methods.getLink();sessionStorage.removeItem("lastClickOnMenu");const s=t?e.methods.getItemToHighlight(t):null;s&&s.classList.add("ods-navbar-link--active")}},events:{clickTogglerButton:()=>{e.elements.headerTogglerButton.addEventListener("click",()=>{e.elements.loginTogglerButton&&(e.variables.loginPanelIsOpened=!1,e.methods.loginPanelDisplay()),e.elements.headerSearchBar&&(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay()),e.variables.navbarIsOpened=!e.variables.navbarIsOpened,e.methods.navbarDisplay()})},closeSearchButton:()=>{e.elements.searchBarCloseButton.addEventListener("click",()=>{const t=document.querySelector(".ais-SearchBox-input");t&&t.value.length?t.value="":(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay())})},clickLoginButton:()=>{e.elements.loginTogglerButton.addEventListener("click",()=>{e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.headerSearchBar&&(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay()),e.variables.loginPanelIsOpened=!e.variables.loginPanelIsOpened,e.methods.loginPanelDisplay()})},clickSearchBarToggler:()=>{e.elements.searchBarTogglerButton.addEventListener("click",()=>{e.variables.searchBarIsOpened=!0,e.methods.searchBarDisplay(),e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.loginTogglerButton&&(e.variables.loginPanelIsOpened=!1,e.methods.loginPanelDisplay())})},clickOverlay:()=>{[...e.elements.overlays].forEach(t=>{t.addEventListener("click",()=>{t.classList.add("inactive"),e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.loginTogglerButton&&(e.variables.loginPanelIsOpened=!1,e.methods.loginPanelDisplay()),e.elements.searchBarTogglerButton&&(e.variables.searchBarIsOpened=!1,e.methods.searchBarDisplay())})})},clickSubcategoryLink:()=>{[...e.elements.navbarSubcategoryLinks,...e.elements.topHeaderSubcategoryLinks].forEach(t=>{t.addEventListener("click",s=>{e.methods.menuSubcategoryDisplay(t),window.innerWidth<e.constants.switchDesktopDisplay&&(s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation())})})},focusSubcategoryLink:()=>{[...e.elements.topHeaderSubcategoryLinks,...e.elements.navbarSubcategoryLinks].forEach(t=>{var s,a;(s=t.closest("li"))==null||s.addEventListener("focusin",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&t.setAttribute("aria-expanded","true")}),(a=t.closest("li"))==null||a.addEventListener("focusout",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&t.setAttribute("aria-expanded","false")})})},focusNavbarMenu:()=>{[...e.elements.navbarItemsLvl1].forEach(t=>{t.addEventListener("mouseenter",e.methods.showOverlayDesktop),t.addEventListener("focusin",e.methods.showOverlayDesktop),t.addEventListener("mouseleave",e.methods.hideOverlayDesktop),t.addEventListener("focusout",e.methods.hideOverlayDesktop)}),e.elements.headerSearchBar&&e.elements.headerSearchBar.addEventListener("focusout",t=>{var a,n;const s=document.querySelector(".ods-search-bar__form__input");((a=t.target)==null?void 0:a.classList.contains("ods-search-bar__form__reset"))&&!(s!=null&&s.value)&&(e.elements.searchOverlay.classList.add("inactive"),(n=e.elements.headerSearchBar)==null||n.classList.remove(e.constants.searchBarOpenClass))})},focusSubcategoryLinkLvl2:()=>{[...e.elements.navbarSubcategoryLinks].forEach(t=>{t.addEventListener("mouseenter",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.methods.menuSubcategoryDisplay(t)}),t.addEventListener("focusin",()=>{window.innerWidth>=e.constants.switchDesktopDisplay&&e.methods.menuSubcategoryDisplay(t)})})},clickBackLink:()=>{[...e.elements.headerBackLinks].forEach(t=>{t.addEventListener("click",()=>{var s,a,n;if(window.innerWidth<e.constants.switchDesktopDisplay){(s=t.closest("[data-menu-scroll-lock]"))==null||s.classList.remove("no-scroll");const r=t.parentNode;r&&r.closest("[data-menu-sublist]")?(a=r.closest("[data-menu-sublist]"))==null||a.classList.remove("active"):r.hasAttribute("data-language-switcher-content")&&r.classList.remove("active"),t.closest("[data-menu-sublist]")&&((n=t.closest("[data-menu-sublist]"))==null?void 0:n.classList.contains("ods-navbar__list--n2"))&&e.elements.navbar.classList.remove("no-scroll")}})})},clickLink:()=>{[...e.elements.headerLinks].forEach(t=>{t.addEventListener("click",()=>{const s=t.getAttribute("data-navi-id");sessionStorage.setItem("lastClickOnMenu",s)})})},clickLocalAnchor:()=>{[...e.elements.topHeaderLocalAnchors].forEach(t=>{t.addEventListener("click",s=>{var n,r;const a=t.getAttribute("href");document.querySelector(a)&&((n=document.querySelector(a))==null||n.scrollIntoView({behavior:"smooth"})),a==="#callback"&&((r=document.querySelector('[data-expand-section="true"]').querySelector(".oui-cta"))==null||r.click()),s.preventDefault()})})},windowSizeListener:()=>{window.addEventListener("resize",()=>{window.innerWidth<e.constants.switchDesktopDisplay?e.elements.topHeaderList&&(e.elements.navbar.appendChild(e.elements.topHeaderList),e.elements.topHeaderList.classList.remove("d-none")):(e.variables.navbarIsOpened=!1,e.methods.navbarDisplay(),e.elements.topHeaderList&&e.elements.topHeaderList.parentNode!==e.elements.topHeaderContainer&&e.elements.topHeaderContainer.appendChild(e.elements.topHeaderList))})}},attach:()=>{e.methods.initialize()}};v.behaviors.header=e})(Drupal);export{p as __vite_legacy_guard};
