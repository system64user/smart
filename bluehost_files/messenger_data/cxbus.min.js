/*!
 * cxbus
 * @version: 2.1.0
 * @license: Genesys Telecom Labs
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cxbus",[],t):"object"==typeof exports?exports.cxbus=t():e.cxbus=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r;void 0===(r=function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var i=n(1).Promise,a=ke(),u="color:red;font-weight:bold",s="color:white;background:#6495ed",c="color:#555;font-style:italic",l="color:#6495ed;font-weight:bold",f=!1,d=!1,m=[],p={},b={},g={},h={},y=[],v={},w={},D={},x={},I={},N=[],C=window.Genesys&&window.Genesys.q&&q(window.Genesys.q,X)?window.Genesys.q:[],j=!1,E=null,_=!0,P=!1,T="",M="",B="plugin.min.js",O={},k={},A=!0,S=!1,G="*",X="array",L=function(){},F={last:null,value:null},J="Could not load plugin file in given location. Check your plugins path option.";function U(e){if(q(e=function(e){var t={};for(var n in e)t[ue(n)]=e[n];return t}(e),"object")){if(q(e.debug,"boolean")&&(j=e.debug),q(e.name,"string")&&e.name.trim().length>0&&(E=e.name.trim()),q(e.queue,X)&&e.debug,q(e.async,"boolean")&&(A=e.async),q(e.log,"boolean")&&(_=e.log),q(e.logstore,"boolean")&&(P=e.logstore),q(e.pluginspath,"string")&&(T=xe(e.pluginspath)),q(e.modulespath,"string")&&(M=xe(e.modulespath)),q(e.pluginfilenameformat,"string")&&(B=e.pluginfilenameformat),q(e.pluginmap,"object")&&(O=e.pluginmap),q(e.pluginmap,"string"))try{O=JSON.parse(e.pluginmap)}catch(t){ye("%cInvalid plugin map JSON. Ignoring "+e.pluginmap,u)}if(q(e.modulemap,"object")&&(k=e.modulemap),q(e.modulemap,"string"))try{k=JSON.parse(e.modulemap)}catch(t){ye("%cInvalid module map JSON. Ignoring "+e.modulemap,u)}if(q(e.childDomain,"string")&&(G=e.childDomain),q(e.childmode,"boolean")&&1==e.childmode)S=e.childmode,d=!0,(window.opener||window.parent).postMessage({type:"CXBus.childCallout",registry:Object.keys(b),busID:a,busName:E},"*");O=z(O),k=z(k),ye("%cGenesys configuration changed",s)}}function q(e,t){return t===X?!!Array.isArray(e):o(e)==t}function R(e,t,n){return he(e,(function(r,i){var c=ue(e),d=b[c];f&&!d&&void 0===t?qe({type:"CXBus.remoteExecution",subType:"registerPlugin",busID:a,pluginName:e}).then((function(e){"pass"===e.resolution?R(e.pluginName,!0).then((function(e){r(e)})):"fail"===e.resolution&&R(e.pluginName,!1).then((function(e){i(e)}))})):!f||f&&!d&&!0===t?"string"!=o(e)||d?d&&i("%cCan't register plugin "+ve(e)+" -- Name is already taken",u,l,u):(b[c]={name:e,namespace:e,interface:re(e),events:{},commands:{},data:{},buffer:[],ready:!1,busID:n||a},h[c]={events:[],commands:[]},b[c].busID==a&&ye("%c New Plugin Registered:"+ve(" "+e),s,l),function(e){var t=e.interface;t.registerCommand("COMMANDS",(function(t){oe(e,"Commands"),t.resolve()})),t.registerCommand("EVENTS",(function(t){oe(e,"Events"),t.resolve()})),t.registerCommand("LOAD",(function(e){e.resolve()}))}(b[c]),b[c].interface.initData=w[c]||{},r(b[c].interface),w[c]&&delete w[c]):f&&!1===t&&i("%cCan't register plugin "+ve(e)+" -- Name is already taken",u,l,u)}))}function H(e){return"function"==o(e)&&(y.push(e),!0)}function Y(e){e&&!e.mID&&(e.mID=ke());for(var t=0;t<y.length;t++)y[t](e)}function z(e){var t={};for(var n in e)t[ue(n)]=e[n];return t}function V(e,t){return he(e||"unknown",(function(e,n){ye(t,u,l,u),n()}))}function W(e){return"string"==typeof e&&e.length>0&&e.trim().length>0}function $(e,t,n){var r=ue(e),i=B.replace("plugin",r),c=O[r],f=!1;return"object"==o(c)&&"string"==typeof c.target&&(f=c.target),w[r]=t||{},function(e){for(var t in e.split(".").length>1&&(e=e.split(".")[0]),b)if(ue(t)==ue(e))return!0;return!1}(e)||D[ue(e)]?V(e,"%cCan't load plugin ("+ve(e)+") -- This plugin is already loaded or an unexpected error occurred."):W(n)?qe({type:"CXBus.remoteExecution",subType:"loadPlugin",busID:a,targetBus:n,pluginName:e,data:t}):(w[r]=t||{},W(f)?qe({type:"CXBus.remoteExecution",subType:"loadPlugin",busID:a,targetBus:f,pluginName:e,data:t}):(ye("%cLoading plugin: "+(c||i),l),he(e,(function(t,n){var r=function(n){!function(e){D[ue(e)]=!0}(e),t(n)},a=function(){n("Could not load plugin file: "+i)};"string"==o(c)&&""!==c?c.match(".js$")?te(c,r,a):(ye("%cError: ("+c+") is not recognized as a javascript file. Please map plugins to javascript files only.",u),n()):!1===c?(ye("%cNotice: "+i+" was prevented from loading by the current plugin mapping configuration.",s),n()):te(T+i,r,a)}))))}function Q(e){return he("loadFile",(function(t,n){if(function(e){return x[e]}(e))ye("%cCan't load file ("+e+") -- This file was already loaded",u,l,u),n();else{ye("%cLoading file: "+e,l),te(e,(function(n){!function(e){x[e]=!0}(e),t(n)}),(function(){n("Could not load file: "+e)}))}}))}function K(e,t){return he("loadJSON",(function(t,n){var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&"200"==r.status?r.responseText&&t(r.responseText):"200"!=r.status&&0!=r.status&&n("loadJSON failed with status code: "+r.status)},r.send(null)}))}function Z(e){var t=ue(e);return he("loadModule",(function(e,n){if(t&&I[t])setTimeout((function(){e(I[t])}),0);else{var r="module.mod.js".replace("module",t),i=k[t],a=""!==M?M:T,c=function(n){e(I[t])},l=function(){n("Could not load module: "+t)};"string"==o(i)&&""!==i?i.match(".js$")?te(i,c,l):(ye("%cError: ("+i+") is not recognized as a javascript file. Please map modules to javascript files only.",u),n()):!1===i?(ye("%cNotice: "+r+" was prevented from loading by the current module mapping configuration.",s),n()):te(a+r,c,l)}}))}function ee(e,t){var n=ue(e);return!I[n]&&(I[n]=t,!0)}function te(e,t,n){if(!e)return!1;var r=document.createElement("script");return r.type="text/javascript",r.onload=t,r.onerror=n,r.src=e,r.charset="UTF-8",document.head.appendChild(r),!0}function ne(e,t){b[ue(e)].ready=!0,function(e){var t=ue(e),n=b[t].buffer||[],r=0;for(r=0;r<n.length;r++)!function(e){var t=fe(e.command);ye(ve(e.commander)+" called the command: "+ve(e.command),l,c,l),t&&we((function(){t(e)}))}(n[r]);b[t].buffer=[]}(e),me(e,"ready",t||{},!0)}function re(e){var t=function(){try{j&&console.log&&console.log.apply(this,arguments)}catch(e){}};return t.info=function(){try{j&&console.info&&console.info.apply(this,arguments)}catch(e){}},t.warn=function(){try{j&&console.warn&&console.warn.apply(this,arguments)}catch(e){}},t.error=function(){try{j&&console.error&&console.error.apply(this,arguments)}catch(e){}},{publish:function(t,n){return me(e,t,n)},publishDirect:function(t,n){return me(e,t,n,!1,!0)},republish:function(t,n){return me(e,t,n,!0)},subscribe:function(t,n){return be(e,t,n)},unsubscribe:function(t){return function(e,t){var n=ce(e),r=ue(t);if(n&&g[r]&&g[r].subscribers){for(var o=[],i=0;i<g[r].subscribers.length;i++)g[r].subscribers[i].subscriber!=e&&o.push(g[r].subscribers[i]);return o.length>0?g[r].subscribers=o:delete g[ue(t)],ye(ve(e)+" unsubscribed from "+ve(t),l,c,l),!0}return!1}(e,t)},command:function(t,n){return ge({commander:e,command:t,data:n})},before:function(e,t){return r=t,!!ae(n=e)&&(v[n]||(v[n]=[]),v[n].push(r),!0);var n,r},registerCommand:function(t,n){return de(e,t,n)},registerEvents:function(t){!function(e,t){var n=ce(e);q(t=t||[],"string")&&(t=[t]);if(n&&t.length>0){for(var r=0;r<t.length;r++)n.events[t[r]]||(n.events[t[r]]=!0,h[ue(e)].events.push(t[r]));return ye(ve(e)+" registered the events: %c"+t.join(", "),l,c,l),!0}}(e,t)},namespace:function(){return e+""},subscribers:function(){return function(e){var t={};for(var n in g)if(n.match(ue(e))){t[n]||(t[n]=[]);for(var r=0;r<g[n].subscribers.length;r++)t[n].push(g[n].subscribers[r].subscriber)}return t}(e)},data:function(t,n){return 2===arguments.length&&"undefined"==o(arguments[1])?ie(e,t,n,!0):ie(e,t,n)},registry:function(){return h},initData:{},log:t,ready:function(){return ne(e)}}}function oe(e,t){for(var n in ye("%cList of "+t+" for: "+ve(e.namespace),s,l),e[ue(t)])ye("%c"+n,s)}function ie(e,t,n,r){return function(e,t,n,r){var i=ue(e);if("undefined"!=o(n)||"undefined"==o(n)&&r){var a;b[i].data[t]?a=b[i].data[t].value:b[i].data[t]=F;o(a);var u=o(n),s={};s.last=a,s.value=n,s.time=je();var c="data."+t;a==n&&o(a)==o(n)||(me(e,"data",b[i].data),me(e,c,s),me(e,"string"==u?c+":'"+s.value+"'":c+":"+s.value,s,!1,!0)),b[i].data[t]=s}}(e,t,n,r),function(e,t){var n=ue(e);if(b[n].data[t])return b[n].data[t].value;if(e&&!t&&b[n])return b[n].data||{};var r=ae(t),o=b[ue(r)];if(t=t.replace(r+".",""),o&&o.data[t])return o.data[t].value;return}(e,t)}function ae(e){return e.split(".")[0]}function ue(e){return"string"==typeof e?e.toLowerCase():e}function se(e,t){return ue(e)===ue(t)}function ce(e){return b[ue(e)]||b[ae(ue(e))]||!1}function le(e){var t=ue(e);return!!b[t]||!!fe(t)}function fe(e){var t=ue(e).split(".")||[],n=!1;return 2==t.length&&(n=ce(t[0]))&&n.commands[t[1]]||!1}function de(e,t,n){var r=ue(t),o=ce(e);return!!o&&(o.commands[r]||h[ue(e)].commands.push(t),o.commands[r]=n,o.busID==a&&ye(ve(e)+" registered the command: "+ve(t),l,c,l),f&&Se({id:a,childID:a,busID:a,type:"CXBus.remoteExecution",subType:"registerCommand",namespace:e,commandName:t}),!0)}function me(e,t,n,r,o,i){var u=ue(De([e,t])),s=ve(e)+" published: "+ve(t),f=ue(e)+".*",d=(n=n||{},{time:je(),publisher:e,event:u,eventName:t,data:n||{}});if(!0===r&&(g[u]?(g[u].republish=!0,g[u].data=n):g[u]={subscribers:[],republish:!0,data:n}),o||i||ye(s,l,c,l),Re("publish",u,g[u]),g[u]){o&&!i&&ye(s,l,c,l);for(var m=g[u].subscribers,p=0;p<m.length;p++)we(m[p].callback,d)}if(g[f])for(m=g[f].subscribers,p=0;p<m.length;p++)we(m[p].callback,d);if(g["*"])for(m=g["*"].subscribers,p=0;p<m.length;p++)we(m[p].callback,d);return i||Ge("publish",{busID:a,childID:a,event:u,eventName:t,publisher:e,republish:r,direct:o,data:n}),Y({type:"publish",time:je(),source:e,target:u,data:n||{}}),!0}function pe(e,t,n,r){ye(ve(t)+" republished: "+ve(e),l,c,l),we(n,{time:je(),publisher:t,event:e,data:r}),Y({type:"publish",time:je(),source:t,target:e,data:r||{}})}function be(e,t,n){if("string"==typeof t){var r=ce(e),o=ce(t),i=ue(t);if(n&&r)return g[i]||(g[i]={subscribers:[],republish:!1}),g[i].subscribers.push({subscriber:e,callback:n}),ye(ve(e)+" subscribed to "+ve(t),l,c,l),!0===g[i].republish&&o&&pe(t,o.namespace,n,g[i].data||{}),Ge("subscribe",{busID:a,childID:a,eventName:t,subscriber:e}),t}else if(Array.isArray(t))for(var u=t,s=0;s<u.length;s++)be(e,u[s],n);return!1}function ge(e){var t=e.commander,n=e.command,r=(ue(n),e.data),i=e.resolveBuff,s=e.rejectBuff,d=e.buffered;r=r||{},n&&1===n.split(".").length&&(n=De([t,n])),d||(r=function(e,t){for(var n=v[e]||[],r=0;r<n.length;r++)"object"==o(t)&&!1!==t&&null!=t&&(t=n[r](t));return t}(n,r));var m=fe(n),p=ae(n),g=b[ue(p)];if(Y({type:"command",time:je(),source:t,target:n,data:r||{}}),f&&!g)return qe({type:"CXBus.remoteExecution",subType:"command",busID:a,pluginName:p,commandName:n,commander:t,data:r});if(!f&&g&&g.busID!=a)return e.message?(e.message.targetID=g.busID,qe(e.message)):qe({type:"CXBus.remoteExecution",subType:"command",busID:a,pluginName:p,commandName:n,commander:t,data:r,targetID:g.busID});if(g&&g.busID==a){var h=he(n,(function(f,d){var h={time:je(),commander:t,command:n,resolve:i||f,reject:s||d,data:r||{}};"object"==o(r)&&!1!==r&&null!=r?g&&g.busID==a&&(ye(ve(t)+" called the command: "+ve(n),l,c,l),g.ready||p==t?m?m(h):(e.message&&(e.message.resolution="fail",e.message.resolutionData="Command does not exist"),h.reject("Command does not exist")):g.ready||(ye("%c"+ve(p)+" is loading and/or has not yet called its ready() method. Your command call ("+n+") has been buffered and will be executed once the plugin has loaded and/or called its ready() method.",u,u,u),function(e,t){b[ue(e)].buffer.push(t)}(p,h))):(e.message.resolution="fail",e.message.resolutionData="Command was cancelled by a 'before' function.",h.reject("Command was cancelled by a 'before' function.")),e.message&&"fail"==e.message.resolution&&qe(e.message)}));return e.message&&h.then((function(t){e.message.resolution="pass",e.message.resolutionData=t,qe(e.message)})).catch((function(t){e.message.resolution="fail",e.message.resolutionData=t,qe(e.message)})),h}return f||g?void 0:he(n,(function(o,i){ye("%c'"+p+"' plugin not currently registered. Attempting to load plugin from configured path ("+T+").",l),$(p).then((function(){ge({commander:t,command:n,data:r,resolveBuff:o,rejectBuff:i,buffered:!0})}),(function(){e.message.resolution="fail",e.message.resolutionData=J,i(J)}))}))}function he(e,t){var n=new i(t);return n.catch((function(t){ye("%cError ("+ve(e)+"): ",u,u,u),console.error&&t&&console.error(t)})),n}function ye(e,t,n,r,i,a){try{_&&(P&&N.push(e+""),j&&console&&console.log&&"string"==o(e)&&("%c"==e.substr(e.length-2,2)&&(e=e.substr(0,e.length-2)),console.log.apply(this,arguments)))}catch(e){Re("logging error!")}}function ve(e){return"%c"+e+"%c"}function we(e,t,n,r){A||r?setTimeout((function(){e(t)}),n||0):e(t)}function De(e){return e.join(".")}function xe(e){return e&&"/"!=e[e.length-1]?e+"/":e}function Ie(){if(d)C.push(arguments);else{var e=arguments,t=e[0]||"";if("registerPlugin"==t)R(e[1]).then(e[2]||L,e[3]||L);else if("command"==t)ge({commander:"Genesys",command:e[1],data:e[2]||{}}).then(e[3]||L,e[4]||L);else if("subscribe"!=t||"string"!=o(e[1])&&!Array.isArray(e[1])||"function"!=o(e[2]))if("monitor"==t&&"function"==o(e[1]))H(e[1]);else if("registerChild"==t)Te(e[1]);else if("registerModule"==t)ee(e[1],e[2]);else if("executeQueue"==t)Ce();else if("loadPlugin"==t)"function"!=typeof e[3]?$(e[1],e[2],e[3]).then(e[4]||L,e[5]||L):$(e[1],e[2],!1).then(e[3]||L,e[4]||L);else if("loadFile"==t)Q(e[1],e[2]).then(e[2]||L,e[3]||L);else if("loadModule"==t)Z(e[1],e[2]).then(e[2]||L,e[3]||L);else if("loadJSON"==t)K(e[1]).then(e[2]||L,e[3]||L);else{if("configure"!=t)return"lookup"==t&&le(e[1]);if(!e[1])return Ne();U(e[1]||{})}else be("Genesys",e[1],e[2])}return!0}function Ne(){return ye("CXBus Configuration\n----------------------------\nDEBUG: \t\t\t\t\t"+j+"\nBUS_NAME: \t\t\t\t"+E+"\nPLUGINS_PATH: \t\t\t"+(T||'""')+"\nMODULES_PATH: \t\t\t"+(M||'""')+"\nPLUGIN_FILENAME_FORMAT: "+B+"\nMODULE_FILENAME_FORMAT: module.mod.js\nPLUGIN_MAP: \t\t\t"+JSON.stringify(O)+"\nMODULE_MAP: \t\t\t"+JSON.stringify(k)+"\nASYNC: \t\t\t\t\t"+A+"\nCHILD_MODE: \t\t\t"+S+"\nCHILD_DOMAIN: \t\t\t"+G+"\nPARENT_DOMAIN: \t\t\t*"),{debug:j,name:E,pluginsPath:T,modulesPath:M,pluginFilenameFormat:B,moduleFilenameFormat:"module.mod.js",pluginMap:O,moduleMap:k,async:A,childMode:S,childDomain:G,parentDomain:"*"}}function Ce(e){if(C){ye("%cExecuting "+C.length+" items from the queue...",s);for(var t=0;t<C.length;t++)Ie.apply(this,C[t])}}function je(){return(new Date).getTime()}if(window.Genesys)for(var Ee=Object.keys(window.Genesys),_e=0;_e<Ee.length;_e++)Ie[Ee[_e]]=window.Genesys[Ee[_e]];window.Genesys=Ie,R("Genesys"),"function"==o(n(3))&&n(4)&&(void 0===(r=function(){return window.Genesys}.apply(t,[]))||(e.exports=r));var Pe={};function Te(e){return!!e&&(e.contentWindow&&(e=e.contentWindow),Pe[id]={id:id,name:void 0,busID:void 0,intvl:setInterval((function(){Me(e,id)}),500),callAttempts:0,registered:!1,window:e,registry:[]},Me(e,id),!0)}function Me(e,t){e.postMessage({type:"CXBus.parentCallout",childID:t,busID:a,busName:E},G),Pe[t].callAttempts++}function Be(e,t,n,r){Pe[t]&&!Pe[t].registered?(clearInterval(Pe[t].intvl),Pe[t].registered=je(),Pe[t].registry=r,Pe[t].busID=busID,Pe[t].busName=n):(Pe[t]={id:t,busID:t,busName:n,intvl:!1,callAttempts:0,registered:je(),window:e,registry:r},e.postMessage({type:"CXBus.parentCallback",busID:t,busName:E},G))}function Oe(e,t,n,r){d=!1,f=e,Ce()}function ke(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function Ae(e,t){Pe[e]&&(t=t||{},Pe[e].window.postMessage(t,G))}function Se(e){f&&f.postMessage(e,"*")}function Ge(e,t){if(Re("broadcast",e,t),(t=t||{}).subType=e,t.type="CXBus.broadcast",f)Se(t);else for(var n in Pe)Ae(n,t)}var Xe,Le,Fe=document.getElementById("genesys-cxbus"),Je={},Ue={src:0,charset:0,id:0,type:0,queue:0,pluginmap:0,modulemap:0};if(Fe){for(_e=0;_e<Fe.attributes.length;_e++)Xe=ue(Fe.attributes[_e].nodeName),"true"===(Le=Fe.attributes[_e].nodeValue)&&(Le=!0),"false"===Le&&(Le=!1),Ue[Xe]||(Je[Xe]=Le);U(Je)}function qe(e){var t;if(e.id)t=e.id;else{for(t=ke();p[t];)t=ke();e.id=t}return he("remoteExecution",(function(n,r){if(p[t]={success:n,fail:r},f)f&&e.id!=a&&Se(e);else if(e.resolution)Ae(e.busID,e);else if(W(e.targetBus)){var o=function(e){for(var t in Pe){var n=Pe[t];if(se(n.busName,e))return n.id}return!1}(e.targetBus);o&&Ae(o,e)}else e.targetID&&Ae(e.targetID,e)}))}function Re(){var e=Array.prototype.slice.call(arguments);e.unshift("["+window.name+"]")}window.addEventListener("message",(function(e){m.push(e),function(){for(;m.length>0;){var e=m.shift(),t=e.data,n=p[t.id];switch(t.type){case"CXBus.parentCallout":S&&Oe(e.source,t.busID,t.busName,t.parentRegistry);break;case"CXBus.childCallout":S||Be(e.source,t.busID,t.busName,t.registry);break;case"CXBus.parentCallback":S&&Oe(e.source,t.busID,t.busName,t.parentRegistry);break;case"CXBus.childCallback":S||Be(e.source,t.busID,t.busName,t.registry);break;case"CXBus.broadcast":f||Ge(e.data.subType,t);var r=ue(t.eventName),o=g[r]||!1;switch(e.data.subType){case"subscribe":if(void 0===t.eventData&&o&&!0===o.republish){var i=ce(t.eventName);t.eventNamespace=i?i.namespace:"",t.eventData=o.data||{},t.subType="republish",Ae(t.busID,t)}break;case"publish":me(t.publisher,t.eventName,t.data,t.republish,t.direct,!0);break;case"republish":for(var u=null,s=0;s<o.subscribers.length;s++)o.subscribers[s].subscriber==t.subscriber&&(u=o.subscribers[s].callback);u&&pe(t.eventName,t.eventNamespace,u,t.eventData||{})}break;case"CXBus.remoteExecution":switch(t.subType){case"loadPlugin":var c=p[t.id];t.resolution?t.resolution&&c&&("pass"==t.resolution?c.success(t.resolutionData):"fail"==t.resolution&&c.fail(t.resolutionData),f||t.busID==a||qe(t),delete p[t.id]):se(E,t.targetBus)&&$(t.pluginName,t.data).then((function(){return t.resolution="pass",qe(t)}),(function(){return t.resolution="fail",t.resolutionData=J,qe(t)}));break;case"registerPlugin":f||(ce(t.pluginName)?(t.resolution="fail",Ae(t.busID,t)):(t.resolution="pass",Ae(t.busID,t),R(t.pluginName,!0,t.busID))),n&&t.resolution&&("pass"==t.resolution?n.success(t):"fail"==t.resolution&&n.fail(t));break;case"registerCommand":f||de(t.namespace,t.commandName,L);break;case"command":c=p[t.id];var l=ae(t.commandName),d=b[ue(l)];if(t.resolution)t.resolution&&c&&("pass"==t.resolution?c.success(t.resolutionData):"fail"==t.resolution&&c.fail(t.resolutionData),f||t.busID==a||qe(t),delete p[t.id]);else if(!f&&d&&d.busID&&d.busID!=a)t.targetID=d.busID,qe(t),Y({type:"command",time:je(),source:t.commander,target:t.commandName,data:t.data||{}});else if(d&&d.busID&&d.busID==a)ge({commander:t.commander,command:t.commandName,data:t.data,message:t});else if(!f&&!d)return t.resolution="fail",t.resolutionData="Plugin does not exist and no plugins path is configured",qe(t)}}}}()}),!1)}()}.apply(t,[]))||(e.exports=r)},function(e,t,n){(function(r){var o;!function(r){var i=r.Promise,a=i&&"resolve"in i&&"reject"in i&&"all"in i&&"race"in i&&function(){var e;return new i((function(t){e=t})),"function"==typeof e}();t?(t.Promise=a?i:x,t.Polyfill=x):void 0===(o=function(){return a?i:x}.call(t,n,t,e))||(e.exports=o);var u=function(){};function s(e){return"[object Array]"===Object.prototype.toString.call(e)}var c,l="undefined"!=typeof setImmediate?setImmediate:setTimeout,f=[];function d(){for(var e=0;e<f.length;e++)f[e][0](f[e][1]);f=[],c=!1}function m(e,t){f.push([e,t]),c||(c=!0,l(d,0))}function p(e){var t=e.owner,n=t.state_,r=t.data_,o=e[n],i=e.then;if("function"==typeof o){n="fulfilled";try{r=o(r)}catch(e){y(i,e)}}b(i,r)||("fulfilled"===n&&g(i,r),"rejected"===n&&y(i,r))}function b(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,(function(r){n||(n=!0,t!==r?g(e,r):h(e,r))}),(function(t){n||(n=!0,y(e,t))})),!0}}catch(t){return n||y(e,t),!0}return!1}function g(e,t){e!==t&&b(e,t)||h(e,t)}function h(e,t){"pending"===e.state_&&(e.state_="sealed",e.data_=t,m(w,e))}function y(e,t){"pending"===e.state_&&(e.state_="sealed",e.data_=t,m(D,e))}function v(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)p(t[n])}function w(e){e.state_="fulfilled",v(e)}function D(e){e.state_="rejected",v(e)}function x(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof x==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function n(e){y(t,e)}try{e((function(e){g(t,e)}),n)}catch(e){n(e)}}(e,this)}x.prototype={constructor:x,state_:"pending",then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(u),fulfilled:e,rejected:t};return"fulfilled"===this.state_||"rejected"===this.state_?m(p,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},x.all=function(e){if(!s(e))throw new TypeError("You must pass an array to Promise.all().");return new this((function(t,n){var r=[],o=0;function i(e){return o++,function(n){r[e]=n,--o||t(r)}}for(var a,u=0;u<e.length;u++)(a=e[u])&&"function"==typeof a.then?a.then(i(u),n):r[u]=a;o||t(r)}))},x.race=function(e){if(!s(e))throw new TypeError("You must pass an array to Promise.race().");return new this((function(t,n){for(var r,o=0;o<e.length;o++)(r=e[o])&&"function"==typeof r.then?r.then(t,n):t(r)}))},x.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this((function(t){t(e)}))},x.reject=function(e){return new this((function(t,n){n(e)}))}}("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this)}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})}])}));