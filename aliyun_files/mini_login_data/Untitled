!function(e,o){var t=1e4,g_moduleConfig={uabModule:{grey:["AWSC/uab/1.140.0/collina.js"],stable:["AWSC/uab/1.140.0/collina.js"],greyBr:["AWSC-br/uab/1.140.0/collina.js"],stableBr:["AWSC-br/uab/1.140.0/collina.js"],ratio:10000,greyConfig:{},stableConfig:{}},fyModule:{grey:["AWSC/fireyejs/1.226.0/fireyejs.js"],stable:["AWSC/fireyejs/1.226.0/fireyejs.js"],greyBr:["AWSC-br/fireyejs/1.226.0/fireyejs.js"],stableBr:["AWSC-br/fireyejs/1.226.0/fireyejs.js"],ratio:10000,greyConfig:{},stableConfig:{}},nsModule:{grey:["js/nc/60.js"],stable:["js/nc/60.js"],ratio:1e4,greyConfig:{},stableConfig:{}},umidPCModule:{grey:["AWSC/WebUMID/1.93.0/um.js"],stable:["AWSC/WebUMID/1.93.0/um.js"],greyBr:["AWSC-br/WebUMID/1.93.0/um.js"],stableBr:["AWSC-br/WebUMID/1.93.0/um.js"],ratio:10000,greyConfig:{},stableConfig:{}},etModule:{grey:["AWSC/et/1.66.7/et_f.js","AWSC/et/1.66.7/et_n.js"],stable:["AWSC/et/1.66.7/et_f.js","AWSC/et/1.66.7/et_n.js"],greyBr:["AWSC-br/et/1.68.2/et_f.js","AWSC-br/et/1.68.3/et_n.js"],stableBr:["AWSC-br/et/1.68.2/et_f.js","AWSC-br/et/1.68.3/et_n.js"],ratio:10000,greyConfig:{"whitelist":["login.taobao.com/member/login.jhtml","passport.alibaba.com/mini_login.htm","login.taobao.com/member/loginByIm.do","login.taobao.com/member/login_by_safe.htm","login.taobao.com/member/vst.htm","login.taobao.com/member/facebookLogin.do","login.m.taobao.com/login.htm","login.m.taobao.com/sendMsg.do","login.m.taobao.com/msg_login.htm","login.m.taobao.com/login_oversea.htm","login.m.taobao.com/login_oversea_phone.htm","login.m.taobao.com/newlogin/login.do","login.m.taobao.com/newlogin/account/check.do","login.m.taobao.com/newlogin/sms/send.do","login.m.taobao.com/newlogin/sms/login.do","buy.taobao.com/auction/buy_now.jhtml","buy.taobao.com/auction/order/confirm_order.html","buy.tmall.com/order/confirm_order.html","buyertrade.taobao.com/trade/itemlist/list_bought_items.htm","member1.taobao.com/member/fresh/account_security.htm","member1.taobao.com/member/fresh/account_management.htm","member1.taobao.com/member/fresh/weibo_bind_management.htm","member1.taobao.com/member/fresh/deliver_address.htm","h5.m.taobao.com/mlapp/olist.html","h5.m.taobao.com/mlapp/odetail.html","main.m.taobao.com/olist/index.html","main.m.taobao.com/odetail/index.html","h5.m.taobao.com/app/hongbao/www/detail/index.html","market.m.taobao.com/app/dinamic/h5-tb-olist/index.html","market.m.taobao.com/app/dinamic/h5-tb-odetail/index.html","market.m.taobao.com/app/mtb/evaluation-list/pages/index2","h5.m.taobao.com/qn/mobile/delivery.html","h5.m.taobao.com/mlapp/odetail.html","main.m.taobao.com/order/index.html","buy.m.tmall.com/order/confirmOrderWap.htm","h5.m.taobao.com/cart/order.html","h5.m.tmall.hk/cart/order.html"]},stableConfig:{"whitelist":["login.taobao.com/member/login.jhtml","passport.alibaba.com/mini_login.htm","login.taobao.com/member/loginByIm.do","login.taobao.com/member/login_by_safe.htm","login.taobao.com/member/vst.htm","login.taobao.com/member/facebookLogin.do","login.m.taobao.com/login.htm","login.m.taobao.com/sendMsg.do","login.m.taobao.com/msg_login.htm","login.m.taobao.com/login_oversea.htm","login.m.taobao.com/login_oversea_phone.htm","login.m.taobao.com/newlogin/login.do","login.m.taobao.com/newlogin/account/check.do","login.m.taobao.com/newlogin/sms/send.do","login.m.taobao.com/newlogin/sms/login.do","buy.taobao.com/auction/buy_now.jhtml","buy.taobao.com/auction/order/confirm_order.html","buy.tmall.com/order/confirm_order.html","buyertrade.taobao.com/trade/itemlist/list_bought_items.htm","member1.taobao.com/member/fresh/account_security.htm","member1.taobao.com/member/fresh/account_management.htm","member1.taobao.com/member/fresh/weibo_bind_management.htm","member1.taobao.com/member/fresh/deliver_address.htm","h5.m.taobao.com/mlapp/olist.html","h5.m.taobao.com/mlapp/odetail.html","main.m.taobao.com/olist/index.html","main.m.taobao.com/odetail/index.html","h5.m.taobao.com/app/hongbao/www/detail/index.html","market.m.taobao.com/app/dinamic/h5-tb-olist/index.html","market.m.taobao.com/app/dinamic/h5-tb-odetail/index.html","market.m.taobao.com/app/mtb/evaluation-list/pages/index2","h5.m.taobao.com/qn/mobile/delivery.html","h5.m.taobao.com/mlapp/odetail.html","main.m.taobao.com/order/index.html","buy.m.tmall.com/order/confirmOrderWap.htm","h5.m.taobao.com/cart/order.html","h5.m.tmall.hk/cart/order.html"]}},ncModule:{grey:["AWSC/nc/1.91.0/nc.js"],stable:["AWSC/nc/1.90.1/nc.js"],ratio:1020,greyConfig:{},stableConfig:{}}},a=[{name:"umidPCModule",features:["umpc","um","umh5"],depends:[],sync:!1},{name:"uabModule",features:["uab"],depends:[],sync:!1},{name:"fyModule",features:["fy"],depends:[],sync:!1},{name:"nsModule",features:["ns"],depends:[],sync:!1},{name:"etModule",features:["et"],depends:[],sync:!1},{name:"ncModule",features:["nc","nvc","ic"],depends:["fy"],sync:!1}],n=navigator.userAgent,r=n.match(/Chrome\/(\d*)/);r&&(r=+r[1]);var i=n.match(/Edge\/([\d]*)/),m=n.match(/Safari\/([\d]*)/),s=n.match(/Firefox\/([\d]*)/),l=n.match(/MSIE|Trident/);function c(){var e="function%20javaEnabled%28%29%20%7B%20%5Bnative%20code%5D%20%7D";return"WebkitAppearance"in document.documentElement.style&&escape(navigator.javaEnabled.toString())===e?!0:!1}function d(o,a){var n="AWSC_SPECIFY_"+o.toUpperCase()+"_ADDRESSES";if(e[n])return e[n];var d={normalAddresses:[],brAddresses:[]};for(var u in g_moduleConfig)if(g_moduleConfig.hasOwnProperty(u)&&u===o){var b=g_moduleConfig[u],f=Math.ceil(Math.random()*t)<=b.ratio;d.normalAddresses=f?b.grey.slice():b.stable.slice(),b.stableBr&&b.greyBr&&(d.brAddresses=f?b.greyBr.slice():b.stableBr.slice()),"etModule"===o&&(i?(d.normalAddresses.pop(),d.brAddresses.pop()):r?(d.normalAddresses.pop(),d.brAddresses.pop()):m||s||l?(d.normalAddresses.shift(),d.brAddresses.shift()):c()?(d.normalAddresses.pop(),d.brAddresses.pop()):(d.normalAddresses.shift(),d.brAddresses.shift()));for(var g=0;g<d.normalAddresses.length;g++){var h=a?"https://"+a+"/":v;("https://assets.alicdn.com/"===h||"https://lzd-g.slatic.net/"===h||"https://g.lazcdn.com/"===h)&&(h+="g/"),d.normalAddresses[g]=h+d.normalAddresses[g],d.brAddresses[g]&&(d.brAddresses[g]=h+d.brAddresses[g])}return d}}var u=[],b="loading",f="loaded",g="timeout",h="unexpected",p="no such feature",y=new RegExp("^([\\w\\d+.-]+:)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(\\?[^#]*)?(#.*)?$"),v=_(A());function _(e){var o="https://g.alicdn.com/";if(!e)return o;if(/aliexpress/.test(location.href))return"https://aeis.alicdn.com/";var t=y.exec(e);return t?"https://"+t[3]+(t[4]?":"+t[4]:"")+"/":o}function A(){for(var e=document.getElementsByTagName("script"),o=0;o<e.length;o++){var t=e[o],a=t.hasAttribute?t.src:t.getAttribute("src",4);if(/\/awsc\.js/.test(a))return a}}function C(e){for(var o=void 0,t=0;t<a.length;t++){for(var n=a[t],r=0;r<n.features.length;r++)if(n.features[r]===e){o=n;break}if(o)break}return o}function j(e){for(var o=0;o<u.length;o++){var t=u[o];if(t.name===e)return t}}function w(e){for(var o=void 0,t=0;t<a.length;t++){var n=a[t];if(n.name===e){o=n;break}if(o)break}return o}function S(e,t,a){if(a)for(var n=0;n<e.normalAddresses.length;n++){var r=e.normalAddresses[n];o.write("<script src="+r+"></script>")}else{function i(e,a,n){for(var r=0;r<e.length;r++){var i=e[r],m=o.createElement("script");m.async=!1,m.src=i,m.id=t,m.onerror=a||function(){},m.onload=n||function(){};var s=o.getElementsByTagName("script")[0];s&&s.parentNode?s.parentNode.insertBefore(m,s):(s=o.body||o.head,s&&s.appendChild(m))}}i(e.normalAddresses)}}function k(o,t,a){var n="https://acjs.aliyun.com/error?v="+o+"&e="+encodeURIComponent(t)+"&stack="+encodeURIComponent(a),r=new Image,i="_awsc_img_"+Math.floor(1e6*Math.random());e[i]=r,r.onload=r.onerror=function(){try{delete e[i]}catch(o){e[i]=null}},r.src=n}function W(e,o){Math.random()<1e-4&&k("awsc_state","feature="+e.name+"&state="+e.state+"&href="+encodeURIComponent(location.href));for(var t=void 0;t=e.callbacks.shift();)try{if("function"==typeof t)t(e.state,e.exportObj);else if("object"==typeof t){var a=e.exportObj;a&&"function"==typeof a.init&&a.init(t)}}catch(n){if(o)throw n;k(e.name,n.message,n.stack)}}function T(e,o,t,a){var n=C(e);if(!n)return"function"==typeof o&&o(p),void 0;var r=t&&t.cdn,i=t&&t.sync,m=t&&t.timeout||5e3;if(0!==n.depends.length)for(var s=0;s<n.depends.length;s++){var l=n.depends[s];t&&(delete t.sync,delete t.timeout,delete t.cdn),M(l,void 0,t)}var c=a||{};c.module=n,c.name=e,c.state=b,c.callbacks=c.callbacks||[],c.options=t,o&&c.callbacks.push(o),c.timeoutTimer=setTimeout(function(){c.state=g,W(c,t&&t.throwExceptionInCallback)},m),a||u.push(c);var f=n.sync;i&&(f=i);var h=d(n.name,r);S(h,"AWSC_"+n.name,f)}function M(e,o,t){var a=j(e);if(a)if(a.state===g)T(e,o,t,a);else if(a.state===f){if("function"==typeof o)o(a.state,a.exportObj);else if("object"==typeof o){var n=a.exportObj;n&&"function"==typeof n.init&&n.init(o)}}else a.state===b?o&&a.callbacks.push(o):void 0;else T(e,o,t)}function x(e,o,t){var a=!1;try{var n=w(e);n||void 0,n.moduleLoadStatus=f;for(var r=void 0,i=0;i<u.length;i++){var m=u[i];m.module===n&&m.name===o&&(a=m.options&&m.options.throwExceptionInCallback,r=m,clearTimeout(r.timeoutTimer),delete r.timeoutTimer,r.exportObj=t,m.state===b||m.state===g?(r.state=f,setTimeout(function(){W(r,a)},0)):void 0)}r||(r={},r.module=n,r.name=o,r.state=f,r.exportObj=t,r.callbacks=[],u.push(r))}catch(s){if(a)throw s;k("awsc_error",s.message,s.stack)}}function B(e){e.AWSCFY=function(){},e.AWSC.configFY=function(e,t,a,n){return o(e,t,a,n)},e.AWSC.configFYSync=function(e,t){return o(null,e,t)};function o(o,t,a,n){var r=location.protocol+"//"+location.host+location.pathname,i=new e.AWSCFY;e._umopt_npfp=0;var m=!1;i.umidToken="defaultToken1_um_not_loaded@@"+r+"@@"+(new Date).getTime(),e.AWSC.use("um",function(e,o){"loaded"===e?(i.umidToken="defaultToken3_init_callback_not_called@@"+r+"@@"+(new Date).getTime(),o.init(t,function(e,o){"success"===e?i.umidToken=o.tn:i.umidToken="defaultToken4_init_failed with "+e+"@@"+r+"@@"+(new Date).getTime(),m=!0,c()})):(i.umidToken="defaultToken2_load_failed with "+e+"@@"+r+"@@"+(new Date).getTime(),m=!0,c())});var s=!1;if(i.getUA=function(){return"defaultUA1_uab_not_loaded@@"+r+"@@"+(new Date).getTime()},e.AWSC.use("uab",function(e,o){s=!0,"loaded"===e?(i.uabModule=o,i.uabConfig=a,i.getUA=function(){return this.uabModule.getUA(this.uabConfig)}):i.getUA=function(){return"defaultUA2_load_failed with "+e+"@@"+r+"@@"+(new Date).getTime()},c()}),null!=o)var l=e.setTimeout(function(){c(!0)},n?n:2e3);function c(t){null!=o&&(s&&m||t)&&(o(i),e.clearTimeout(l))}return null==o?i:void 0}}function U(e){var o=function(){};e.AWSC.configFYEx=function(e,o,a){return t(e,o,a)},e.AWSC.configFYSyncEx=function(e){return t(null,e)};function t(t,a,n){var r=(location.protocol+"//"+location.host+location.pathname).substr(0,128),i=new o;if(n=n||5e3,"function"==typeof t)var m=e.setTimeout(function(){s()},n);function s(){"function"==typeof t&&(t(i),e.clearTimeout(m))}return i.getFYToken=i.getUidToken=function(){return"defaultFY1_fyjs_not_loaded@@"+r+"@@"+(new Date).getTime()},e.fyglobalopt=a,e.AWSC.use("fy",function(e,o){"loaded"===e?(i.getFYToken=i.getUidToken=function(){return"defaultFY3_fyjs_not_initialized@@"+r+"@@"+(new Date).getTime()},i.fyObj=o,o.init(a,function(e){i.getFYToken=function(){return this.fyObj.getFYToken(a)},i.getUidToken=function(){return this.fyObj.getUidToken(a)},s()})):(i.getFYToken=i.getUidToken=function(){return"defaultFY2_load_failed with "+e+"@@"+r+"@@"+(new Date).getTime()},s())},{timeout:n}),"function"==typeof t?void 0:i}}function D(e){var o=g_moduleConfig.etModule,a=Math.ceil(Math.random()*t)<=o.ratio,n=a?o.greyConfig.whitelist:o.stableConfig.whitelist,r=new RegExp(("^"+n.join("$|^")+"$").replace(/\*/g,".*"));r.test(location.host+location.pathname)&&(window.etrprtrt=.01,e.__etModule||e.AWSC.use("et"))}function E(e){e.AWSC||(e.AWSC={},e.AWSC.use=M,e.AWSCInner={},e.AWSCInner.register=x,B(e),U(e),D(e))}E(e)}(window,document);var baxiaCommon=function(){"use strict";var win=window,BAXIA_KEY="__baxia__",getStore=function(e,t){var n=win[BAXIA_KEY]||{};return e?n[e]||t:n},setStore=function(e,t){win[BAXIA_KEY]=win[BAXIA_KEY]||{},win[BAXIA_KEY][e]=t},includes=function(e,t){return!!e&&e.indexOf(t)>-1},isObjectString=function(e){var t=!0;try{JSON.parse(e)}catch(n){t=!1}return t},isEmptyObject=function(e){if(!e)return!0;for(var t in e)return!1;return!0},toArray=function(e){for(var t=Array(e.length),n=0;t.length>n;++n)t[n]=e[n];return t},addQueryString=function(e,t,n){return includes(e,t)?e:e.indexOf("?")>-1?e+"&"+t+"="+n:e+"?"+t+"="+n},addFormUrlEncoded=function(e,t,n){return includes(e,t)?e:e+"&"+t+"="+n},isMobile=function(){return navigator.userAgent.match(/.*(iPhone|iPad|Android|ios|SymbianOS|Windows Phone).*/i)},isRendered=function(e){if(e&&!document.getElementById(e.id))return!1;var t=e&&e.querySelector(".nc_wrapper"),n=e&&e.querySelector("._nc");return!!t||!!n};function addVersionToUrl(e){return getStore("options",{}).addVersionToUrl?!e||endsWith(e,".js")||endsWith(e,".css")||includes(e,"_bx-v")?e:addQueryString(e,"_bx-v",version):e}function endsWith(e,t){return!!e&&e.substring(e.length-t.length)===t}function formatJsonp(e){return void 0===e&&(e=""),e.substring(e.indexOf("{"),e.lastIndexOf("}")+1)}var formatInjectOptions=function(options){if("string"==typeof options.checkApiPath){var reg_1=options.checkApiPath+"";options.checkApiPath=function(e){return RegExp(reg_1).test(e)}}if("string"==typeof options.renderTo&&(options.renderTo=document.querySelector(options.renderTo)),"string"==typeof options.renderNC&&(options.renderNC="true"===options.renderNC),"string"==typeof options.awscTimeout&&(options.awscTimeout=+options.awscTimeout),"string"==typeof options.showCallback){var _showCallback_1=options.showCallback+"";options.showCallback=function(){eval(_showCallback_1)}}if("string"==typeof options.hideCallback){var _hideCallback_1=options.hideCallback+"";options.hideCallback=function(){eval(_hideCallback_1)}}return options},isGray=function(){var e=document.currentScript&&document.currentScript.src;if(e&&e.indexOf("ratio")>-1){var t=e.match(/ratio=([^&]+)/),n=+encodeURIComponent(t&&t[1]);return Math.random()<=n}return!0};function getCurrentJSDomain(){var e=getCurrentScript(),t=e&&e.src?e.src.match(/https\:\/\/([^&]+).alicdn/):[,"g"],n=t&&t[1],r="";return-1===["laz-g-cdn","aeis","assets","lazada-slatic-g"].indexOf(n)&&(n="g"),r="https://"+n+".alicdn.com/","assets"===n&&(r+="g/"),r}function getCurrentScript(){if(document.currentScript)return document.currentScript;var e=null,t=document.getElementsByTagName("script"),n=null;try{throw Error()}catch(a){var r,o=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(a.stack)||[!1])[1];for(r in t)if((n=t[r]).src==o||"interactive"==n.readyState)return e=t[r],t[r]}return e}function getDomain(e){var t=e.match(/(https?:\/\/)?((([\w-]+\.)+\w+)|localhost)(:\d{1,5})?/g);return t&&t[0]||""}function crossOrigin(e){try{return!e||(e.url?e=e.url:e.href?e=e.href:"[object Array]"===Object.prototype.toString.call(e)&&(e=e[0]),"/"!==e.substring(0,1)?host!==getDomain(e):"//"===e.substring(0,2)&&host!==getDomain(location.protocol+e))}catch(t){return log("璺ㄥ煙鏍￠獙寮傚父锛宮essage锛�"+t,1,1),!0}}var host=location.protocol+"//"+location.host,version="2.2.3",loc=location,doc=document,log=function(e,t,n){(void 0===t&&(t=1),void 0===n&&(n=.1),0>=n||Math.random()<n)&&_send({code:t,msg:(e+"").substr(0,1e3)+";v:"+version,pid:"baxia",page:loc.href.split(/[#?]/)[0],query:loc.search.substr(1),hash:loc.hash,referrer:doc.referrer,title:doc.title,ua:navigator.userAgent},"//gm.mmstat.com/fsp.1.1?")};function importantLog(e){log(e,13,.1)}function veryImportantLog(e){log(e,16,1)}function _send(e,t){var n=[];for(var r in e)n.push(r+"="+encodeURIComponent(e[r]));(new Image).src=t+n.join("&")}var addEvent=function(e,t,n,r){if(void 0===r&&(r=!1),t.addEventListener)t.addEventListener(e,n,r);else if(t.attachEvent)return t.attachEvent("on"+e,n),!1},isSupportedHookProperty=function(){var e={test:"true"};try{return Object.defineProperty(e,"test",{enumerable:!1,value:e}),Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"readyState")&&e.test==e.test}catch(t){return!1}}(),hookFunctionAndArguments=function(e,t,n,r){var o=e[t];e[t]=function(){var e=toArray(arguments);if(n&&!r&&!1===n.apply(this,e))return;return r&&(e=n.apply(this,e)),o.apply(this,e)}},hookFunction=function(e,t,n){var r=e[t];e[t]=function(){var e=toArray(arguments);if(n&&!1===n.apply(this,e))return;return r.apply(this,e)}},hookProperty=function(e,t,n,r){if(Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(isSupportedHookProperty&&!o||!o)importantLog("閿欒锛氫笉鏀寔 hookProperty");else{var a=o.set,i=o.get;isSupportedHookProperty&&Object.defineProperty(e,t,{set:function(){var e=toArray(arguments);if(n){var t=n&&n.apply(this,e);e=t?[t]:e}a&&a.apply(this,e)},get:function(){var e=i&&i.apply(this);return r?r.call(this,e):e}})}}},resetReadonlyProperty=function(e,t,n){Object.defineProperty(e,t,{writable:!0}),e[t]=n},validate=function(e){void 0===e&&(e="");var t={valid:!1,type:"",checkjs_flag:!1},n={};if("string"!=typeof e&&"object"!=typeof e)return t.valid=!0,t;if("string"==typeof e){if(e.length>5e4)return t.valid=!0,t;if(!includes(e,"rgv587_flag")&&!includes(e,"RGV587_ERROR::SM")&&!includes(e,"CHECKJS_FLAG"))return t.valid=!0,t;try{n=JSON.parse(e)}catch(i){try{e=formatJsonp(e),n=JSON.parse(e)}catch(i){return t.valid=!0,t}}}else n=e;if(n&&n._bx_upgrade_)return t.valid=!0,t;var r,o=n&&"sm"===n.rgv587_flag&&n.url,a=n&&n.ret&&n.data&&n.ret.indexOf("RGV587_ERROR::SM")&&n.data.url;return n.CHECKJS_FLAG&&n.uuid&&n.serid&&(log("triggerCheckJsFlag"),t.checkjs_flag=!0,r=!0),o||a||r?t:(t.valid=!0,t)};function handleAutoResponse(e){var t=e;try{if(includes(e,"rgv587_flag:sm")&&includes(e,"window._config_")){var n="";(t=e.replace(/\s+/g,"").match(/window\.\_config_\=([^;]+)/))&&t[1]&&(n=t[1]),(t=n&&JSON.parse(n)).rgv587_flag="sm",t.url||(t.url="renderIframe"),t.data=e,t._bx_upgrade_="true"===t.isUpgrade}}catch(r){}return t}var handlerSecdata=[];function isBaxiaBlockByCookie(){var e=document.cookie.match(/x5secdata=([^;]+)/),t=e&&e[1];return!(!e||document.hidden)&&(-1>=handlerSecdata.indexOf(t)&&("__bx__"!==t&&(-1>=t.indexOf("mtop.")&&(clearX5SecData(),(!window._config_||!window._config_.action)&&(handlerSecdata.push(t),t)))))}function clearCookie(e){var t=new Date;t.setTime(t.getTime()+-100);var n="x5secdata=;maxAge=-100;expires="+t.toUTCString()+";path=/;domain="+e+";";document.cookie=n,document.cookie=n+"Secure;SameSite=None"}function clearX5SecData(){try{if(-1>=document.cookie.indexOf("x5secdata"))return;var e=location.host,t=e.split("."),n=t.length>5?5:t.length;1!==n&&2!==n||clearCookie(e),e=t.pop();for(var r=2;n>r;r++)clearCookie(e="."+t.pop()+"."+e)}catch(o){importantLog("x5secdata clear error")}}var XHRPrototype=XMLHttpRequest.prototype,_event=null,HookBX=function(e){var t=e.done;try{isSupportedHookProperty&&hookProperty(XHRPrototype,"readyState",null,function(e){try{var n=e,r=this;this._onreadystatechange=this._onreadystatechange||this.onreadystatechange;var o=getResponse(r);if(3!==n||validate(o).valid){if(4===n&&"json"===r.responseType&&!validate(o).valid)return void t({response:o,readyState:n,xhr:this,eventKey:"onreadystatechange"})}else this.onreadystatechange=function(e){var a=this;_event=window.event||e||_event,o=getResponse(r),t({response:o,readyState:n,xhr:r,eventKey:"onreadystatechange",event:_event},function(){a._onreadystatechange!==a.onreadystatechange&&a._onreadystatechange(_event)})};return n}catch(a){throw veryImportantLog("銆怰esponse Step銆慩hr readyState error, message: "+a.message+", stack: "+a.stack),Error(a)}})}catch(n){importantLog("Hook xhr readyState error, message:"+n.message)}hookFunction(XHRPrototype,"send",function(){var e=this;try{this.sendParams=arguments;var r=toArray(this.openParams||[]);if(!crossOrigin(r[1]||""))try{this.setRequestHeader("bx-v",version)}catch(n){log("xhr娣诲姞鐗堟湰鍙峰け璐ワ紝message锛�"+n+"锛寀rl锛�"+r[1],1,1)}this._onload||(this._onload=this.onload),this.onload&&(this.onload=function(e){var n=this;_event=window.event||e;var r=getResponse(this,function(e){t({response:e,readyState:3,xhr:n,eventKey:"onload"},function(){n._onload&&n._onload(_event)})});"bx blob handled"!==r&&t({response:r,readyState:3,xhr:this,eventKey:"onload"},function(){n._onload&&n._onload(_event)})}),!isSupportedHookProperty&&addEvent("readystatechange",this,function(){var n=getResponse(e);t({response:n,readyState:e.readyState,xhr:e,eventKey:"readystatechange"})})}catch(n){throw veryImportantLog("銆怰equest Step銆慩hr send error, message: "+n.message+", stack: "+n.stack),Error(n)}}),hookFunction(XHRPrototype,"setRequestHeader",function(e,t){this._header_=this._header_||{},this._header_[e]=t}),hookFunctionAndArguments(XHRPrototype,"open",function(){try{this.openParams=arguments;var e=toArray(arguments);return e[1]=addVersionToUrl(e[1]),e}catch(n){throw veryImportantLog("銆怰equest Step銆慩hr open error, message: "+n.message+", stack: "+n.stack),Error(n)}},!0)};function getResponse(e,t){var n="";try{if((n=handleAutoResponse(n=e.response||e.responseText))instanceof Blob&&t){if(n.size>1e4)return n;var r=new FileReader;r.onload=function(){try{var e=JSON.parse(this.result);t(e)}catch(n){t("")}},r.readAsText(n),n="bx blob handled"}}catch(o){n=""}return n}var doc$1=document,loadJS=function(e,t,n){if(!e)return t();var r=doc$1.getElementsByTagName("script")[0],o=doc$1.createElement("script");if(o.async=!0,o.src=e,e.indexOf("alicdn")>-1&&(o.crossOrigin=!0),o.onerror=function(t){log("function:loadJS. msg:"+e+"load error銆俻rops锛�"+JSON.stringify(n)),o.onerror=null},t){var a=!1;o.onload=o.onreadystatechange=function(){a||o.readyState&&!/loaded|complete/.test(o.readyState)||(o.onload=o.onreadystatechange=null,a=!0,t())}}r.parentNode.insertBefore(o,r)},loadCSS=function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.appendChild(n)},getHandlerPath=function(e,t){return t&&t.result&&t.result.jsPath?t.result.jsPath:""+getStore("cdnPath","https://g.alicdn.com/sd/baxia/"+version+"/")+e+".js"},_handlerQueue=[],pluginInstance,handler=function(e,t){void 0===e&&(e="Xhr"),void 0===t&&(t={});try{if(pluginInstance){var n=getStore("options",{});return(n.renderTo||n.autoDestroy)&&pluginInstance.destroy(),pluginInstance.handler(t)}_handlerQueue.push({pluginName:e,props:t});var r=_handlerQueue[0],o="baxia"+r.pluginName+"Handler",a=getHandlerPath(o,r.props);loadJS(a,function(){if(!pluginInstance){pluginInstance=new window[o];for(var e=0;_handlerQueue.length>e;e++)try{pluginInstance.handler(_handlerQueue[e].props)}catch(t){pluginInstance=null,veryImportantLog("銆怘andler Step銆慼andler error, type: "+_handlerQueue[e].pluginName+", action: "+_handlerQueue[e].props.result.action+", url: "+_handlerQueue[e].props.result.url+", message:"+t.message+", stack:"+t.stack);break}_handlerQueue=[]}})}catch(i){throw pluginInstance=null,veryImportantLog("銆怘andler Step銆慼andler error, type: "+e+", action: "+t.result.action+", url: "+t.result.url+", message:"+i.message+", stack:"+i.stack),Error(i)}};function init(){try{HookBX({done:function(e,t){var n=e.response,r=e.readyState,o=e.xhr,a=e.eventKey;if(n||(n=getResponse$1(o)),!o._processing){var i=validate(n);o._processing||3>r||i.valid?t&&t():(o._processing=!0,"onreadystatechange"===a&&(o.onload=o._onload),clearX5SecData(),handler("Xhr",{result:n,checkJsFlag:i.checkjs_flag,config:{xhr:o,url:o.responseURL,fail:function(){var e=o.onerror||o.onabort||o.ontimeout;e?e():(resetReadonlyProperty(o,"status",500),t())}}}))}}})}catch(e){importantLog("Hook xhr error, message:"+e.message)}}var xhrPrompt={version:version,init:init};function getResponse$1(e){var t="";try{t=e.response||e.responseText}catch(n){t=""}return t}function initXHR(){var e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){if(this.addEventListener)this.addEventListener("readystatechange",function(){if(4===this.readyState&&200===this.status&&!this._processing){var e="";try{e=handleAutoResponse(e=this.response||this.responseText)}catch(t){e=""}validate(e).valid&&""!==e||handler$1("xhr")}});else if(this.attachEvent){var t="";try{t=handleAutoResponse(t=this.response||this.responseText)}catch(n){t=""}validate(t).valid&&""!==t||handler$1("xhr-ie")}e.apply(this,toArray(arguments))}}function handler$1(e){setTimeout(function(){var t=isBaxiaBlockByCookie();if(t){var n=new XMLHttpRequest;n.open("GET",getPunishUrlBySecData(t,e)),n.send(null)}},500)}function getPunishUrlBySecData(e,t){return"https://"+decodeURIComponent(e).split("__bx__")[1]+"/_____tmd_____/punish?reqeust=getpunishpage&source="+t+"&x5secdata="+e}function init$1(){try{handler$1("cookie"),initXHR()}catch(e){importantLog("Hook cookie error, message:"+e.message)}}var cookiePrompt={init:init$1},HookBX$1=function(e){var t=e.done,n=window.fetch;n&&(window.fetch=function(){var e=arguments;return new window.Promise(function(r,o){var a=e[1]||{};if(a.credentials&&"omit"!==a.credentials||(a.credentials="same-origin"),!crossOrigin(e[0]||""))try{e[1]||e[0].url?(a.headers=e[1]?a.headers||{}:e[0].headers||{},a.headers.has?a.headers.set("bx-v",version):a.headers["bx-v"]=version):(e.length=2,e[1]={headers:{"bx-v":version}})}catch(i){log("fetch娣诲姞鐗堟湰鍙峰け璐ワ紝message锛�"+i,1,1)}e[0].url?getStore("options",{}).addVersionToUrl&&(e[0]=new Request(addVersionToUrl(e[0].url),e[0])):e[0].href?e[0].href=addVersionToUrl(e[0].href):e[0]=addVersionToUrl(e[0]);n.apply(window,e).then(function(n){try{var s=n.headers.get("content-type");if(-1>=s.indexOf("json")&&-1>=s.indexOf("text"))return r(n);n.clone().text().then(function(i){return t?t({parentConfig:a,parentArguments:e,response:n,data:i,resolve:r,reject:o}):(r(n),i)})["catch"](function(e){o(e)})}catch(i){return r(n)}})["catch"](function(e){o(e)})})})};function init$2(){try{HookBX$1({done:function(e){var t=e.parentConfig,n=e.parentArguments,r=e.response,o=e.data,a=e.resolve,i=e.reject;try{var s=o&&o.config||{};s&&((s=t).url=n[0]&&(n[0].url||n[0].href)||n[0]);var c=void 0;o=handleAutoResponse(o);var u=validate(o);return u.valid?((c=s.baxiaData&&s.baxiaData.defer)?c.resolve(r):a(r),o):(s.baxiaData={defer:c={resolve:a,reject:i},response:r},clearX5SecData(),handler("Fetch",{result:o,config:s,checkJsFlag:u.checkjs_flag}),c.promise)}catch(d){throw veryImportantLog("銆怰esponse Step銆慒etch response done error, message: "+d.message+", stack: "+d.stack),Error(d)}}})}catch(e){importantLog("Hook fetch error, message:"+e.message)}}var fetchPrompt={init:init$2},init$3=function(){xhrPrompt.init(),cookiePrompt.init(),fetchPrompt.init()},CONST_BAXIA_PROMPT_INIT="baxiaPromptInit",CONST_BAXIA_INIT="baxiaInit",CONST_OPTIONS="options",SEA_DOMAIN=/lazada|alibaba.com|aliexpress|localhost/,isEffectUrl=function(e,t){if(!e||"string"!=typeof e||e.indexOf("ynuf.aliapp.org/service/um.json")>-1)return!1;var n=e+t,r=getStore("handleEffectUrl",{});if("boolean"==typeof r[e+"fetch"]&&"xhr"===t)return!1;var o=!1,a=getStore(CONST_OPTIONS,{}).checkApiPath;return a&&a(e)&&(o=!0),r[n]=o,setStore("handleEffectUrl",r),o};function canSubmit(e){var t=getStore()||{},n=t.options,r=void 0===n?{}:n,o=t.ncData,a=r.canSubmit;if(!r.renderNC)return!0;if(a){var i=a(e.url,o);return!i&&_unVerifiedCallback(),i}return!(!o||0===o.length)||(_unVerifiedCallback(),!1)}function _unVerifiedCallback(){var e=(getStore()||{}).options;((void 0===e?{}:e).unVerifiedCallback||function(){alert("璇峰厛瀹屾垚楠岃瘉鍚庡啀杩涜鎿嶄綔")})()}var hookRewriteArgumentsAndApply=function(e,t,n){var r=e[t];e[t]=function(){var e=toArray(arguments);n.call(this,e,r)}},getPostUA=function(){var e=getStore("postFYModule",{});return e&&e.getFYToken?e.getFYToken():"not_loaded"},getUA=function(){return getPostUA()},getGetUA=function(){var e=getStore("getFYModule",{});return e&&e.getFYToken?e.getFYToken():"not_loaded"},getUmidToken=function(){var e=getStore("getFYModule",{});return e&&e.getUidToken?e.getUidToken():"not_loaded"},getDefaultLocation=function(){var e=document.currentScript?document.currentScript.src:"";return e?e.indexOf("laz-g-cdn")>-1?"sea":includes(e,"assets.")?"us":"cn":"cn"},emit={},events=getStore("events",{}),_emit={on:function(e,t){return(events[e]||(events[e]=[])).push(t),setStore("events",events),emit},once:function(e,t){var n=this,r=function(){t.apply(n,toArray(arguments)),n.off(e,r)};return this.on(e,r),emit},off:function(e,t){if(!e&&!t)return events={},emit;var n=events[e];if(n)if(t)for(var r=n.length-1;r>=0;r--)n[r]===t&&n.splice(r,1);else delete events[e];return emit},fire:function(e,t){var n=(events=getStore("events",{}))[e];if(n)for(var r=0,o=(n=n.slice()).length;o>r;r++)n[r](t);return emit}},NC_PARAM_UMIDTOKEN="bx-umidtoken",NC_PARAM_UA="bx-ua",NC_PARAM_ASAC="bx-asac",EVENT_AWSC_READY="event:awscReady@baxia",SubmitType;!function(e){e[e.Null=0]="Null",e[e.QueryString=1]="QueryString",e[e.JSONString=2]="JSONString",e[e.FormData=3]="FormData",e[e.FormUrlEncoded=4]="FormUrlEncoded",e[e.Form=5]="Form",e[e.XHRHeader=6]="XHRHeader",e[e.FetchHeader=7]="FetchHeader"}(SubmitType||(SubmitType={}));var getUA$1=function(e){return e===SubmitType.QueryString?getGetUA():getPostUA()},addASACParamToRequest=function(e){if(!e)return e;var t=getStore("options",{}).asac;return t?e=addParamToRequest(getASACSubmitType(e),e,[{key:NC_PARAM_ASAC,value:t}]):e},addNCParamToRequest=function(e){try{var t=getNCSubmitType(e),n=getUA$1(t),r=getUmidToken(),o=getStore("options",{}),a=o.uabOptions,i=void 0===a?{}:a,s=o.umOptions,c=void 0===s?{}:s,u=[{key:NC_PARAM_UA,value:n}];o.needUmidToken&&u.push({key:NC_PARAM_UMIDTOKEN,value:r});var d=getStore("ncData");d&&d.length>0&&(u=u.concat(d));try{SEA_DOMAIN.test(location.host)&&(i.location||c.location||console&&console.log("umOptions.location not set"),u=u.concat([{key:"bx-sys",value:"ua-l:"+(i.location||"no")+"__um-l:"+(c.serviceLocation||"no")+"__js:"+getCurrentJSDomain()}]))}catch(l){}e=addParamToRequest(t,e,u)}catch(l){log("addParamToRequest:"+l.message)}return e},getNCSubmitType=function(e){var t=getCustomSubmitType(e);if(t)return t;var n=e.params;return isObjectString(n)?t=SubmitType.JSONString:n instanceof FormData?t=SubmitType.FormData:"string"==typeof n&&n.indexOf("=")>-1?t=SubmitType.FormUrlEncoded:n instanceof HTMLFormElement&&(t=SubmitType.Form),t},getASACSubmitType=function(e){return getCustomSubmitType(e)||SubmitType.QueryString},getCustomSubmitType=function(e){var t=getStore("options",{}).appendTo,n=null;return"header"===t?e.request&&(e.request instanceof XMLHttpRequest||e.request.send)?n=SubmitType.XHRHeader:e.request&&"object"==typeof e.request&&(n=SubmitType.FetchHeader):"get"!==e.method&&"querystring"!==t||(n=SubmitType.QueryString),n};function preRequest(e){var t=getStore("options",{}),n=t.asac,r=t.awscTimeout,o=Math.random()+"".substring(1,10),a=EVENT_AWSC_READY+o;if(_emit.once(a,function(e){e.isAppend()||(n&&(e=addASACParamToRequest(e)),e=addNCParamToRequest(e)),canSubmit(e)?e.process(e):e.canNotSubmit&&e.canNotSubmit()}),!isAwscReady()){var i=setInterval(function(){isAwscReady()&&(clearInterval(i),clearTimeout(s),_emit.fire(a,e))},200),s=setTimeout(function(){clearInterval(i),_emit.fire(a,e)},r+200);return e}_emit.fire(a,e)}function isAwscReady(){var e=getStore("options",{}).needUmidToken,t=getUmidToken();return!(e&&(-1!==t.indexOf("defaultToken1")||-1!==t.indexOf("defaultToken3"))||!getStore("getFYModule")&&!getStore("postFYModule"))}function addParamToRequest(e,t,n){switch(e){case SubmitType.XHRHeader:addParam(t.params,n,function(e){t.request.setRequestHeader(e.key,e.value)});break;case SubmitType.FetchHeader:var r=t.headers||{};addParam(t.params,n,function(e){var t=e.key,n=e.value;r.append?r.append(t,n):r[t]=n}),t.headers=r;break;case SubmitType.Form:addParam(t.params,n,function(e){addInput(t.params,e.key,e.value)});break;case SubmitType.QueryString:addParam(t.params,n,function(e){t.url=addQueryString(t.url,e.key,encodeURIComponent(e.value))});break;case SubmitType.FormUrlEncoded:addParam(t.params,n,function(e){t.params=addFormUrlEncoded(t.params,e.key,e.value)});break;case SubmitType.FormData:addParam(t.params,n,function(e){t.params.append(e.key,e.value)});break;case SubmitType.JSONString:var o=t.params?JSON.parse(t.params):{};addParam(o,n,function(e){o[e.key]=e.value}),t.params=JSON.stringify(o)}return t}function addParam(e,t,n){for(var r=t.length,o=0;r>o;o++)n(t[o]);return e}function addInput(e,t,n){var r=document.createElement("input");r.type="hidden",r.name=t,r.value=n,e.appendChild(r)}var initFetch=function(){try{var e=window.fetch;if(!e)return;window.fetch=function(){var t=arguments;return new window.Promise(function(n,r){var o=t[0],a=t[1]||{},i=function(){e.apply(window,t).then(function(e){return n(e)})["catch"](function(e){r(e)})};if("string"!=typeof o)return i();if(!isEffectUrl(o,"fetch"))return i();var s=a.headers,c=a.body,u=void 0===c?"{}":c,d=a.method;preRequest({url:o,params:u,method:void 0===d?"get":d,headers:s,request:{},isAppend:function(){return!(!s||!s["bx-ua"])||(!!(s&&s.has&&s.has("bx-ua"))||("string"==typeof u?u&&u.indexOf("bx-ua")>-1:u&&u.has&&u.has("bx-ua")))},process:function(e){var n=e.headers,r=e.params;t[0]=e.url,isEmptyObject(n)||(a.headers=n),r&&"{}"!==r&&(a.body=r),t[1]=a,i()}})})}}catch(t){importantLog("fetch token"+t.message)}},XHRPrototype$1=XMLHttpRequest.prototype,initXhr=function(){try{hookRewriteArgumentsAndApply(XHRPrototype$1,"send",function(e,t){var n=this;if(!this.effectUrl||this.handleToken)return t.apply(this,e);this.handleToken=!0,preRequest({url:this.effectUrl,request:this,params:e[0],headers:null,isAppend:function(){return n.appended},process:function(e){t.call(n,e.params)}})}),hookFunctionAndArguments(XHRPrototype$1,"open",function(){var e=toArray(arguments),t=e[1];if(!isEffectUrl(t,"xhr")||this.effectUrl)return this.appended=!0,e;this.effectUrl=e[1];var n=getStore("options",{}).appendTo,r=(e[0]+"").toLocaleLowerCase();return"header"===n?e:("querystring"!==n&&"get"!==r||(t=addNCParamToRequest({url:t,method:r,request:null,params:null,headers:null}).url),t=addASACParamToRequest({url:t,request:null,params:null,headers:null}).url,e[1]=t,e)},!0)}catch(e){importantLog("xhr token"+e.message)}},initJsonp=function(){var e=HTMLScriptElement.prototype;hookFunctionAndArguments(e,"setAttribute",function(){var e=toArray(arguments),t=e[1];"src"===e[0]&&isEffectUrl(t,"script")&&preRequest({url:t,method:"get",request:{},isAppend:function(){return t&&t.indexOf("bx-ua")>-1},process:function(t){e[1]=t.url}});return e},!0),hookProperty(e,"src",function(e){isEffectUrl(e,"script")&&(preRequest({url:e,method:"get",request:{},isAppend:function(){return e&&e.indexOf("bx-ua")>-1},process:function(t){e=t.url}}),e.indexOf("bx-ua")>-1||(e=addQueryString(e,"bx-ua","fast-load")));return e})},initForm=function(){try{var e=!1,t=function(t){if("submit"===t.type){var n=t.target||t.srcElement,r=n.getAttribute("action")||location.href;if(!isEffectUrl(r,"form"))return;if(!0===e)return void t.preventDefault();e=t.formSubmit,preRequest({url:r,params:n,headers:{},request:{},isAppend:function(){return!!n["bx-ua"]},canNotSubmit:function(){t.preventDefault()},process:function(e){var t=e.url;r!==t&&n.setAttribute("action",t)}})}};addEvent("submit",document,t);var n=window.HTMLFormElement;n&&hookFunction(n.prototype,"submit",function(){e=!1,t({type:"submit",target:this,formSubmit:!0,preventDefault:function(){throw"鏈畬鎴愰獙璇�"}})})}catch(r){importantLog("form token"+r.message)}},init$4=function(){var e=getStore(CONST_OPTIONS,{});initGetAWSC(e),initPostAWSC(e),initFetch(),initXhr(),initForm(),initJsonp()};function initPostAWSC(e){var t=window.AWSC,n=e.uabOptions||{};n.location=n.location||getDefaultLocation(),t.configFYEx(function(e){setStore("postFYModule",e)},n||{},e.awscTimeout)}function initGetAWSC(e){var t=window.AWSC,n=e.uabOptions||{};n.MaxMTLog=n.MaxMTLog||20,n.MaxNGPLog=n.MaxNGPLog||10,n.MaxKSLog=n.MaxKSLog||5,n.MaxFocusLog=n.MaxFocusLog||3,n.location=n.location||getDefaultLocation(),t.configFYEx(function(e){setStore("getFYModule",e)},n||{},e.awscTimeout)}var noCaptcha=null,isMobile$1=isMobile(),renderNC=function(e){if(e.renderNC=e.renderNC||location.search.indexOf("renderNC")>-1,e.renderNC)if(isRendered(e.renderTo))console.log("宸茬粡娓叉煋鎴栬€� DOM 鍏冪礌涓嶅瓨鍦�");else{var t="";e.cssLink&&loadCSS(e.cssLink),isMobile$1?(t="register_h5",loadJS("//g.alicdn.com/sd/nch5/index.js",function(){noCaptcha=window.NoCaptcha,i.bannerHidden=!1,noCaptcha.init(i),noCaptcha.setEnabled(!0)})):(t="register",loadJS("//g.alicdn.com/sd/ncpc/nc.js",function(){noCaptcha=new window.noCaptcha(i)}));var n=e.verifiedCallback,r=e.showCallback,o=e.ncAppkey,a=e.ncToken,i={renderTo:"#"+e.renderTo.id,appkey:void 0===o?"NCAPPKEY":o,token:void 0===a?"NCTOKENSTR":a,bannerHidden:!1,scene:t,replaceCallback:function(e,t,r){var o,a=[];isMobile$1?o=r.bind(this,"ok"):(o=e.success,t=e.data),a.push({key:"bx-nc-ua",value:t.n}),setStore("ncData",a),setStore("ncSlideData",t),o({success:!0,result:{code:0}}),n&&n()},language:e.ncLanguage};r&&r()}},NC={reset:function(){if(isMobile$1)return noCaptcha.reset();noCaptcha.reload()},show:function(){noCaptcha.show()},hide:function(){noCaptcha.hide()},setTrans:function(e){noCaptcha.setTrans(e)},upLang:function(e,t){noCaptcha.upLang(e,t)}},_isGray=isGray();!getStore(CONST_BAXIA_PROMPT_INIT)&&_isGray&&(setStore(CONST_BAXIA_PROMPT_INIT,!0),init$3());var init$5=function(e){void 0===e&&(e={}),_isGray&&((e=formatInjectOptions(e)).awscTimeout=e.awscTimeout||3e3,setStore(CONST_OPTIONS,e),renderNC(e),getStore(CONST_BAXIA_INIT)||(setStore(CONST_BAXIA_INIT,!0),e.checkApiPath&&init$4()))},BaxiaCommon=function(){return function(e){this.set=setStore,this.version=version,this.getUA=getUA,this.NC=NC,init$5(e)}}();return BaxiaCommon.set=setStore,BaxiaCommon.version=version,BaxiaCommon.getUA=getUA,BaxiaCommon.NC=NC,BaxiaCommon.init=function(e){void 0===e&&(e={}),e.needUmidToken=!0,init$5(e)},log("i,c",11,.01),BaxiaCommon}();
