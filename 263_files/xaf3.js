var xaf=function(){"use strict";function t(){var t;if(document.currentScript)t=document.currentScript;else{var e=document.getElementsByTagName("script"),r=e[e.length-1];if(r.getAttribute("data-bdms-faccdee21b68")||r.getAttribute("data-app"))t=r;else for(var a=0;a<e.length;a++){var o=e[a].getAttribute("src");if(o&&-1<o.indexOf("xaf.js")){t=e[a];break}}}var n="",i="";return t&&t.getAttribute&&(n=(r=function(t){var e={dataApp:"",dataAppProp:""};t.getAttribute("data-bdms-faccdee21b68")?(e.dataApp=t.getAttribute("data-bdms-faccdee21b68"),e.dataAppProp="data-bdms-faccdee21b68"):t.getAttribute("data-app")?(e.dataApp=t.getAttribute("data-app"),e.dataAppProp="data-app"):t.getAttribute("app")&&(e.dataApp=t.getAttribute("app"),e.dataAppProp="app");return e}(t)).dataApp,i=r.dataAppProp),{dataApp:n,dataAppProp:i}}function o(t){for(var e="",r=0;r<t.length;r++){var a=t.charCodeAt(r),o=r%32;e+=a<=122&&41<=a?122<a+o?String.fromCharCode(40+a-122+o):String.fromCharCode(a+o):String.fromCharCode(t.charCodeAt(r))}return e}function r(t){if(void 0!==t){if(t<0)throw new Error("timeout最小值为0");if(6e5<t)throw new Error("timeout最大值为600000")}}var n=function(){try{if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","testValue"),window.localStorage.removeItem("test"),!0}catch(t){return!1}}catch(t){return!1}}(),d={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,r,a,o,n,i,c="",f=0;for(t=d.utf8Encode(t);f<t.length;)a=(i=t.charCodeAt(f++))>>2,o=(3&i)<<4|(e=t.charCodeAt(f++))>>4,n=(15&e)<<2|(r=t.charCodeAt(f++))>>6,i=63&r,isNaN(e)?n=i=64:isNaN(r)&&(i=64),c=c+this.keyStr.charAt(a)+this.keyStr.charAt(o)+this.keyStr.charAt(n)+this.keyStr.charAt(i);return c},decode:function(t){var e,r,a,o,n,i,c="",f=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<t.length;)a=this.keyStr.indexOf(t.charAt(f++)),e=(15&(o=this.keyStr.indexOf(t.charAt(f++))))<<4|(n=this.keyStr.indexOf(t.charAt(f++)))>>2,r=(3&n)<<6|(i=this.keyStr.indexOf(t.charAt(f++))),c+=String.fromCharCode(a<<2|o>>4),64!==n&&(c+=String.fromCharCode(e)),64!==i&&(c+=String.fromCharCode(r));return c=d.utf8Decode(c)},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var a=t.charCodeAt(r);a<128?e+=String.fromCharCode(a):(127<a&&a<2048?e+=String.fromCharCode(a>>6|192):(e+=String.fromCharCode(a>>12|224),e+=String.fromCharCode(a>>6&63|128)),e+=String.fromCharCode(63&a|128))}return e},utf8Decode:function(t){for(var e,r,a="",o=0,n=0;o<t.length;)(e=t.charCodeAt(o))<128?(a+=String.fromCharCode(e),o++):191<e&&e<224?(n=t.charCodeAt(o+1),a+=String.fromCharCode((31&e)<<6|63&n),o+=2):(n=t.charCodeAt(o+1),r=t.charCodeAt(o+2),a+=String.fromCharCode((15&e)<<12|(63&n)<<6|63&r),o+=3);return a}},c="https://sofire.baidu.com/h5/r",i={status:""},f=null,u=null,s=!1,p=!1,g=null,l=null,m={dataApp:"",dataAppProp:""},h=(new Date).getTime(),w="",e="https://safe.cdn.bcebos.com/",A=e+"js/dfxaf3.js",C=e,S=[],v=[],x=[],y={report:function(t){r((t=t||{}).timeout),"loading"===i.status?x.push(t):"error"===i.status?E(t):window.xaf.coreDfXaf?window.xaf.report(t):E(t,"dfxaf3.js error")},hgzAs:function(t,e){f=t,u=e,"success"===i.status&&window.xaf.coreDfXaf?window.xaf.hgzAs(t,e):function(t,e){{if(function(t){var e=g&&!g.aid&&!t.aid,t=!g&&!t.aid;return e||t}(t))throw"aid缺失";"loading"===i.status?p=!0:e&&"function"==typeof e&&e("")}}(t,e)},reportV3:function(e){r((e=e||{}).timeout);try{return window.xaf.coreDfXaf?window.xaf.reportV3(e):new Promise(function(t){"loading"===i.status?I(t,"dfxaf3.js loading",e):"error"===i.status?I(t,null,e):I(t,"dfxaf3.js error",e)})}catch(t){console.log(t)}},hgzAsV3:function(t){try{return window.xaf.coreDfXaf?window.xaf.hgzAsV3(t):new Promise(function(t){t("")})}catch(t){console.log(t)}},getData:function(){return window.xaf.coreDfXaf?window.xaf.getData():{Token:"",view:""}},init:function(t,e){window.xaf.coreDfXaf?window.xaf.init(t,e):"loading"===i.status&&(s=!0,g=t,l=e)},onReady:function(t){"function"==typeof t&&S.push(t)},onReadyFail:function(t){"function"==typeof t&&v.push(t)}};function a(t){var e=function(t){t=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return t?t[2]:null}("dfxafjs"),r=e?C+e:A;w=e||"",n&&localStorage.setItem("__g",w);var a,o,t=(t=(r={url:r,addScriptCallback:t,isGray:w}).url,a=r.isGray,(r=document.createElement("script")).src=t,m.dataAppProp&&r.setAttribute(m.dataAppProp,m.dataApp),r.onerror=function(e){b({r:"fi",time:(new Date).getTime()-h,fr:e+""||"Faild to load"}),i={status:"error"},p&&"function"==typeof u&&u(""),x.forEach(function(t){E(t)}),v.forEach(function(t){t(e)})},r.onload=function(){a&&b({r:"lo",time:(new Date).getTime()-h,fr:""}),i={status:"success"},y=window.xaf,s&&window.xaf.init(g,l),p&&window.xaf.hgzAs(f,u),x.forEach(function(t){window.xaf.report(t)}),S.forEach(function(t){t(window.xaf)})},r);r=t,(t=document.getElementsByTagName("script")[0])&&t.parentNode?t.parentNode.insertBefore(r,t):(t=document.body||document.head)&&t.appendChild(r),i={status:"loading"},o!==A&&(document.cookie="dfxafjs="+o+";expires="+function(t){var e=new Date;return e.setTime(t),e.toUTCString()}((new Date).getTime()))}function b(t){var e=t.r,r=t.time,a=t.fr,o=t.e,n=new Image,i=encodeURIComponent,t=navigator.connection?navigator.connection.effectiveType||navigator.connection.type||"":"wifi";n.src=c+"/1234"+"?n=".concat(i(t))+"&u=".concat(i(location.href))+"&ts=".concat(h)+"&tt=".concat((new Date).getTime())+"&ti=".concat(r||0)+"&v=".concat(w)+"&r=".concat(e||"")+"&fr=".concat(i(a||""))+"&em=".concat(i(o&&o.message||""))+"&ef=".concat(i(o&&o.filename||""))+"&el=".concat(o&&o.lineno||"")+"&ec=".concat(o&&o.colno||"")}function D(){return"0x1x"+Math.floor((Math.random()+Math.floor(9*Math.random()+1))*Math.pow(10,9))}var T="31$";function j(t,e){var r="".concat((n?localStorage.getItem("__bid_n"):"")||D(),"|").concat(location.href,"|").concat((new Date).getTime());r+="|"+t;t=(new Date).getTime()+"",r={i:"0",tn:t,tj:t,tp:h+"",to:e.timeout+"",v:"s3.4.9",j:r},r=o(JSON.stringify(r));return T+"CODED--v30"+d.encode(r)}function k(t){if(!n)return null;var e=t.timeout,r=parseInt(n?localStorage.getItem("__tc")||"1":"0");if(5<=r)return null;var a=parseInt(n&&localStorage.getItem("__tu")||"0");if(288e5<(new Date).getTime()-a)return null;t=r+1+"";localStorage.setItem("__tc",t);r=localStorage.getItem("__t"),r={i:t,tn:(new Date).getTime()+"",tj:a+"",tp:h+"",to:e+"",v:"s3.4.9",j:r};return d.encode(o(JSON.stringify(r)))}function E(t,e){var r=t.complete,a="number"==typeof t.timeout?t.timeout:5e3,t=k({timeout:a}),a=t?T+t:j(e||"dfxaf3 failed to load",{timeout:a});r&&r({code:0,msg:"",jt:a})}function I(t,e,r){var a=r.timeout||5e3,r=k({timeout:a});t({code:0,msg:"",jt:r?T+r:j(e||"dfxaf3 failed to load",{timeout:a})})}return e=t(),m=e,a(),window.xaf=y}();
